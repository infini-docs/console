'use strict';(function(){const indexCfg={cache:true};indexCfg.doc={id:'id',field:['title','content'],store:['title','href','section'],};const index=FlexSearch.create('balance',indexCfg);window.bookSearchIndex=index;index.add({'id':0,'href':'/docs/reference/platform/overview/','title':"Platform Overview",'section':"Platform",'content':"Platform Overview #  Introduction #  You can view the main indicators at these levels(cluster, node, indice and host) to understand the operation status.\nCluster #  Node #  Indice #  Host #  Host data comes from INFINI Agent reporting and node discovery of elasticsearch.\nDiscover Host #  Click the button \u0026ldquo;Discover Host\u0026rdquo; on the right side of the host list，then click the button \u0026ldquo;add hosts\u0026rdquo; to add the host to the host list after checking.\n"});index.add({'id':1,'href':'/docs/reference/data/','title':"Data",'section':"Reference",'content':"Data management #  Introduction #  INFINI Console Data allows you to seamlessly roam in different business clusters, supports common index management operations, quickly view and browse document information in the index, and edit and delete documents on the spot. At the same time, it supports creating data views, modifying the display format of fields, and quickly viewing time series index data with one click.\n"});index.add({'id':2,'href':'/docs/reference/devtool/','title':"Dev Tools",'section':"Reference",'content':"Dev Tools #  Introduction #  Use Dev Tools to quickly write and execute Elasticsearch queries and other elasticsearch APIs. When installation verification is enabled, all requests will go through API level permission verification\nOpen Dev Tools #  Use the Ctrl+Shift+O shortcut to open or click the icon in the upper right corner of the console.\nExecute request shortcuts #  Command+Enter or Ctrl+Enter\nMulti-cluster multi-tab page support #  The Dev Tools supports the use of tab pages to open multiple clusters at the same time. Even if it is the same cluster, multiple clusters can be opened, and the status of the tab pages is independent. The tab page uses the cluster name as the title by default, and can be modified by double-clicking the tab page title. Below the Dev Tools is a status bar, and on the left is the health status, http address, and version information of the current cluster. On the right is the response status and duration of the elasticsearch interface request.\nView request header information #  After using the Dev Tools to execute the elasticsearch request, you can click the headers Tab page on the right to view the request header information.\n"});index.add({'id':3,'href':'/docs/getting-started/install/','title':"Installation",'section':"Quick Start",'content':"Installing the Console #  INFINI Console supports mainstream operating systems and platforms, the package is small, without any additional external dependencies, it should be very fast to install :)\nPreparation before Installation #  Prepare an Elasticsearch cluster that can store data. The required version is 7.3 or above, which is used for INFINI Console to store related data.\nDownloading #  Select a package for downloading in the following URL based on your operating system and platform:\n https://release.infinilabs.com/console/\nContainer Deployment #  INFINI Console also supports Docker container deployment.\nLearn More  Configure #  After downloading and decompressing the installation package of INFINI Console, open the console.yml configuration file, we can see the following configuration sections:\n#Elasticsearch cluster version should be v7.3+ for storing INFINI Console related data elasticsearch: - name: default enabled: true monitored: true endpoint: http://192.168.3.188:9299 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB In general, we only need to modify the endpoint in the configuration. If Elasticsearch has security verification enabled, we need to modify the username and password configurations.\nThe username here requires full access to cluster metadata, index metadata, and .infini* indexes, and to create index templates.\nFor the initial settings of the index template, please refer here to Learn more。\nStarting the Console #  The Console can be started by directly running the program (the mac version is used here, and the program file names of different platforms are slightly different), as follows:\n➜ BOOTSTRAP_USERNAME=admin BOOTSTRAP_PASSWORD=123456 ./console-mac-amd64 ___ __ ___ ___ / __\\/ / /___\\/\\ /\\ / \\ / / / / // // / \\ \\/ /\\ / / /__/ /__/ \\_//\\ \\_/ / /_// \\____|____|___/ \\___/___,' ___ ___ __ __ ___ __ __ / __\\/___\\/\\ \\ \\/ _\\ /___\\/ / /__\\ / / // // \\/ /\\ \\ // // / /_\\ / /__/ \\_// /\\ / _\\ \\/ \\_// /__//__ \\____|___/\\_\\ \\/ \\__/\\___/\\____|__/ [CONSOLE] INFINI Cloud Console, The easiest way to operate your own elasticsearch platform. [CONSOLE] 0.3.0_SNAPSHOT, 2022-03-31 10:26:41, 2023-12-31 10:10:10, fa04f6010144b7c5267c71ccaee30230ddf2432d [03-31 20:27:40] [INF] [app.go:174] initializing console. [03-31 20:27:40] [INF] [app.go:175] using config: /Users/shiyang/infini/console-0.3.0_SNAPSHOT-447-mac-amd64/console.yml. [03-31 20:27:40] [INF] [instance.go:72] workspace: /Users/shiyang/infini/console-0.3.0_SNAPSHOT-447-mac-amd64/data/console/nodes/c92psf1pdamk8rdhgqpg [03-31 20:27:40] [INF] [app.go:283] console is up and running now. [03-31 20:27:40] [INF] [metrics.go:63] ip:192.168.3.12, host:shiyangdeMacBook-Pro.local, labels:, tags: [03-31 20:27:40] [INF] [elastic.go:136] loading [5] remote elasticsearch configs [03-31 20:27:40] [INF] [actions.go:280] elasticsearch [default] is available [03-31 20:27:40] [INF] [actions.go:280] elasticsearch [lsy_cluster_1] is available [03-31 20:27:40] [INF] [actions.go:280] elasticsearch [es-v710] is available [03-31 20:27:40] [INF] [actions.go:280] elasticsearch [es-v7140] is available [03-31 20:27:40] [INF] [ui.go:197] ui listen at: http://0.0.0.0:9000 [03-31 20:27:40] [INF] [module.go:116] all modules are started Seeing the above startup information, it means that the Console has successfully run and monitored port 9000. You can log in and use by accessing port 9000 in the browser. The initial user name and password information are passed through the environment variables BOOTSTRAP_USERNAME, BOOTSTRAP_PASSWORD ` to set.\nShutting Down the Console #  To shut down INFINI Console, hold down Ctrl+C. The following information will be displayed:\n^C [CONSOLE] got signal: interrupt, start shutting down [03-31 20:33:10] [INF] [module.go:145] all modules are stopped [03-31 20:33:10] [INF] [app.go:267] console now terminated. [CONSOLE] 0.3.0_SNAPSHOT, uptime: 5m30.307832s __ _ __ ____ __ _ __ __ / // |/ // __// // |/ // / / // || // _/ / // || // / /_//_/|_//_/ /_//_/|_//_/ ©INFINI.LTD, All Rights Reserved. System Service #  To run the Console as a background task, run the following commands:\n➜ ./console -service install Success ➜ ./console -service start Success Unloading the service is simple. To unload the service, run the following commands:\n➜ ./console -service stop Success ➜ ./console -service uninstall Success "});index.add({'id':4,'href':'/docs/reference/agent/manage/manage/','title':"Overview",'section':"Agent",'content':"Agent Overview #  Overview #  Agent Manage includes functions such as auditing, viewing status, tasks setting, etc. It is the place to manage Agent.\nAdd Agent #  Agent \u0026gt; Instance click Discover Agent。 Select the correct Agent and click Add Agents. Delete Agent #  Agent \u0026gt; Instance，click Delete, delete after confirmation。 Task Settings #  Agent \u0026gt; Instance，click Task Setting，configure the task, then click Save "});index.add({'id':5,'href':'/docs/reference/platform/monitoring/','title':"Cluster Monitoring",'section':"Platform",'content':"Cluster Monitoring #  Introduction #  When the monitoring of the registered cluster is enabled, the INFINI Console will periodically collect data from the target cluster according to the corresponding configuration. Including some metrics at the cluster, node, and index level. These metrics can then be observed in cluster monitoring to understand the running status of the target cluster.\nList of Elasticsearch API permissions required for monitoring #  _cluster/health，_cluster/stats，_cat/shards, /_nodes/\u0026lt;node_id\u0026gt;/stats _cat/indices, _stats, _cluster/state, _nodes, _alias, _cluster/settings\nEnable cluster monitoring #  When registering the cluster or modifying the cluster configuration, you can see the following interface\nYou can see that there is a Monitored switch. When this switch is turned on, it means that the current cluster is monitored. When a cluster is registered, monitoring is enabled by default. The monitoring configuration includes cluster health metrics, cluster metrics, node metrics and index metrics. And you can set whether to open and the collection time interval respectively.\n The above are the settings for a single cluster. In the configuration file console.yaml, you can set the monitoring start and stop of all clusters. By default, you can see the following configuration in the configuration file:\nmetrics: enabled: true major_ip_pattern: \u0026quot;192.*\u0026quot; queue: metrics elasticsearch: enabled: true cluster_stats: true node_stats: true index_stats: true If metrics\u0026gt;enable is set to false, then all cluster monitoring is disabled; If metrics\u0026gt;elasticsearch\u0026gt;cluster_stats\u0026gt;enabled is set to false, then all The cluster will not collect related metrics at the cluster level.\n View cluster metrics monitoring #  After monitoring is enabled, you can view the monitoring information of the cluster in the monitoring report under the platform management on the left menu of INFINI Console, as follows:\nClick the Advanced tab to view more metrics at the cluster level;\nAs shown in the figure, you can specify multiple nodes in a cluster to view node-related metrics and compare them horizontally. By default, the top 5 node metrics are displayed (top 5 nodes are calculated based on the sum of the query qps and write qps of the node in the last 15 minutes). Switching to the index tab page here can also specify several related metrics to view the index, similar to the node. Switch to the Thread Pool tab to view the related metrics of the node\u0026rsquo;s thread pool.\nView node metrics monitoring #  Click the Nodes tab to view a list of cluster nodes.\nClick the node name in the list to view the monitoring of the specified node\nHere you can view the metrics monitoring information and related fragmentation information of a single node\nView index metrics monitoring #  Click the Indexes tab to see a list of cluster indexes.\nClick the node name in the list to view the monitoring of the specified index\nHere you can view the metrics monitoring information and related fragmentation information of a single node\n"});index.add({'id':6,'href':'/docs/reference/system/cluster/','title':"Cluster Management",'section':"System",'content':"Cluster Management #  Introduction #  Cluster management can quickly and easily help us manage multiple Elasticsearch clusters across versions.\nCluster list #  The registered Elasticsearch cluster can be queried in the cluster list\nCluster registration #  The first step is to fill in the cluster address, and enable TLS and authentication as needed (you need to input a user name and password after enabling authentication).\nThe second step is to confirm the information\n Modify the cluster name and cluster description as needed; Whether to enable monitoring (enabled by default), after enabling monitoring, you can view various metrics of the Elasticsearch cluster in the console monitoring function Whether to enable Discovery (recommended), after enabling, the console will automatically discover all nodes in the cluster. When the configured cluster address is unavailable, the console will try to use the automatically discovered addresses available in other nodes to interact with Elasticsearch  Update cluster configuration #  Click the Edit button in the cluster list table to input the update interface\nModify the configuration as needed, then click the save button to submit\nDelete cluster #  Click the delete button in the cluster list table to confirm the second time. After confirming the deletion, execute the delete operation.\n"});index.add({'id':7,'href':'/docs/reference/alerting/message/','title':"Alerting Center",'section':"Alerting",'content':"Alerting center #  Introduction #  By default, the message center displays the alerting events that are currently occurring in the system, which is convenient for administrators to quickly preview the execution status of the system.\nMessage list #  The message list aggregates all triggered alerting events. If each alerting rule repeatedly triggers multiple alerting messages, only one will be aggregated and displayed here. Click the details to see more information.\nMessage details #  Click the Details button in the message list row and column to view the detailed content of the current alerting event message, including the basic information of the event message, the timing curve within the event trigger period, and the history of rule execution detection, etc., as shown in the following figure:\nIgnore warning messages #  If you think that the alerting event does not need to be processed or is not important, you can ignore it. After ignoring, the alerting message will not be displayed in the message list by default, but it can be queried by status filtering.\nOperation steps: Click the ignore button in the message list form to confirm the second time, fill in the ignore reason, and execute the ignore operation after submitting.\n"});index.add({'id':8,'href':'/docs/reference/system/command/','title':"Common Commands",'section':"System",'content':"Common Commands #  Introduction #  Common commands are used to save frequently used Elasticsearch requests in Dev toolss, so that if you need to use them later, Just use the LOAD command in the Dev tools to load, and it can be used quickly.\nSave frequently used commands #  Open the Dev tools (Ctrl+shift+o) in the upper right corner of the console, and select the Elasticsearch request to be saved in the Dev tools (Supports selecting multiple requests at one time and saving them as common commands), after selecting, click Save As Command in the toolbar to submit.\nLoad common commands #  In the Dev tools, input LOAD + saved command name keyword will automatically prompt related saved common commands, After selecting the command to be loaded, press the Input key to automatically load the corresponding common command.\nCommon command list #  In the list of common commands, you can query the saved common commands\nClick the name column of common commands in the list to view the specific information of common commands, and you can also modify the name and tag information\nDelete common commands #  Click the Delete button in the list of frequently used commands to confirm twice, and then execute the delete operation.\n"});index.add({'id':9,'href':'/docs/reference/alerting/rule/','title':"Alerting Rules",'section':"Alerting",'content':"Alerting Rules #  Introduction #  The alerting rules include the configuration of four parts: data source, metrics definition, trigger condition, and message notification\nAlerting rules list #  In the alerting rules list, you can query the alerting rules that have been added\nNew alerting rule #  Click the New button in the alerting rule list to enter the new alerting rule page\nConfigure data source #   Select a cluster (required) Select index, support input index pattern (required) Input elasticsearch query DSL query filter conditions (optional) Select time field (required) Select the statistical period (for time field aggregation, the default is one minute)  Configure alerting metrics and trigger conditions #   Input the rule name Add the grouped fields and group size as needed, you can add more than one for terms aggregation Select the metrics aggregation field and statistics type, you can configure more than one, when configuring more than one, you must configure a formula to calculate the final metrics Configure alerting trigger conditions Select execution check cycle Input the title of the alerting event (template, referenced by the title in the template variable, click here to learn about template syntax ) Input alerting event message (template, referenced by message in template variable, click here for template syntax )  Configure message notification #   Configure notification channels, which can be reconfigured, or you can use the add button to select an already created channel as a template to quickly fill in, and support adding multiple Choose whether to enable notification upgrades as needed Select silence period (how often notification messages are sent) Configure notification sending time period Click the save button to submit  Update alerting rules #  Select the alerting rule to be updated in the alerting rules list and click the Edit button to enter the update alerting rules page\nDelete alerting rules #  Click the delete button in the alerting rule list table to confirm the second time. After confirming the deletion, execute the delete operation.\nImport of common rule templates #  Some common Alerting rules are listed below, and notification channels such as DingTalk, Enterprise WeChat, and Slack are configured. You only need to replace the custom variables specified in the template, and you can quickly import the rules through the DevTools tool of the Console.\n  Cluster Health Change to Red  Index Health Change to Red  Disk utilization is Too High  CPU utilization is Too High  JVM utilization is Too High  Shard Storage \u0026gt;= 55G  Elasticsearch node left cluster  Search latency is great than 500ms  Too Many Deleted Documents  "});index.add({'id':10,'href':'/docs/tutorials/start_with_specify_user/','title':"How to specify built-in account name and password to start INFINI Console",'section':"Tutorials",'content':"How to specify built-in account name and password to start INFINI Console #  Prepare #   Download and install the latest version of INFINI Console Enable INFINI Console Security Features  INFINI Console built-in account #  INFINI Console has a built-in administrator account with security turned on. Without specifying an account name and password, INFINI Console defaults to the built-in account\u0026rsquo;s username and password as admin.\nSpecify the account name and password to start INFINI Console #  INFINI Console supports the use of environment variables to specify the account name and password to start. The following takes the Macos operating system as an example:\nBOOTSTRAP_USERNAME=admin BOOTSTRAP_PASSWORD=123456 ./console-mac-amd64\ndisable built-in accounts #  Due to the use of built-in accounts, there may be security risks, such as simple password settings. So when we use the built-in account After logging in to the INFINI Console to create a new administrator account, you can log in with the new administrator account, and then Disable built-in accounts in System \u0026gt; Security Settings. After disabling it, you cannot use the built-in account to log in to the INFINI Console.\nCreate admin account #  INFINI Console has a built-in administrator role Administrator, which is assigned when a new user is created, and the new user has administrator privileges.\nClick the left menu of INFINI Console System \u0026gt; Security Settings, select the User Tab page to enter the Account Management page. Then click the New button to enter the Create User page\n Input username root role selection Administrator Click the save button to submit Save the initial password after successful saving for backup  Disable built-in user with newly created admin #  Use the root user and password created in the previous step to log in to the INFINI Console, and then turn on the disable built-in account switch in System \u0026gt; Security Settings. When you see the following interface, the operation is successful.\n"});index.add({'id':11,'href':'/docs/reference/data/indices/','title':"Index Management",'section':"Data",'content':"Index management #  Index list #  The index list includes addition, deletion, modification, and lookup operations on indexes.\nNew index #  Input the new index name and index settings to complete the addition.\nIndex details #  You can view the index health status, number of shards, number of documents, storage size and other details, as well as view and modify Mappings and Edit settings.\n"});index.add({'id':12,'href':'/docs/getting-started/ilm/','title':"Index Settings",'section':"Quick Start",'content':"Index Settings #  All monitoring metrics of INFINI Console are stored in the Elasticsearch index. As time goes by, the data will increase. We can configure the life cycle of the index to adapt to our monitoring storage requirements.\nConfigure the Default Index Template #  Then you can configure the index template of the Elasticsearch cluster, and execute the following command on the system monitoring cluster to create the index template.\n Expand to see Elasticsearch template definitions ...  PUT _template/.infini { \u0026quot;order\u0026quot;: 0, \u0026quot;index_patterns\u0026quot;: [ \u0026quot;.infini_*\u0026quot; ], \u0026quot;settings\u0026quot;: { \u0026quot;index\u0026quot;: { \u0026quot;max_result_window\u0026quot;: \u0026quot;10000000\u0026quot;, \u0026quot;mapping\u0026quot;: { \u0026quot;total_fields\u0026quot;: { \u0026quot;limit\u0026quot;: \u0026quot;20000\u0026quot; } }, \u0026quot;analysis\u0026quot;: { \u0026quot;analyzer\u0026quot;: { \u0026quot;suggest_text_search\u0026quot;: { \u0026quot;filter\u0026quot;: [ \u0026quot;word_delimiter\u0026quot; ], \u0026quot;tokenizer\u0026quot;: \u0026quot;classic\u0026quot; } } }, \u0026quot;number_of_shards\u0026quot;: \u0026quot;1\u0026quot; } }, \u0026quot;mappings\u0026quot;: { \u0026quot;dynamic_templates\u0026quot;: [ { \u0026quot;strings\u0026quot;: { \u0026quot;mapping\u0026quot;: { \u0026quot;ignore_above\u0026quot;: 256, \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot;: \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot;: {} }     Configure ILM for index .infini_metrics #   Expand to view settings ...  PUT _ilm/policy/infini_metrics-30days-retention { \u0026quot;policy\u0026quot;: { \u0026quot;phases\u0026quot;: { \u0026quot;hot\u0026quot;: { \u0026quot;min_age\u0026quot;: \u0026quot;0ms\u0026quot;, \u0026quot;actions\u0026quot;: { \u0026quot;rollover\u0026quot;: { \u0026quot;max_age\u0026quot;: \u0026quot;30d\u0026quot;, \u0026quot;max_size\u0026quot;: \u0026quot;50gb\u0026quot; }, \u0026quot;set_priority\u0026quot;: { \u0026quot;priority\u0026quot;: 100 } } }, \u0026quot;delete\u0026quot;: { \u0026quot;min_age\u0026quot;: \u0026quot;30d\u0026quot;, \u0026quot;actions\u0026quot;: { \u0026quot;delete\u0026quot;: { \u0026quot;delete_searchable_snapshot\u0026quot;: true } } } } } } PUT _template/.infini_metrics-rollover { \u0026quot;order\u0026quot; : 100000, \u0026quot;index_patterns\u0026quot; : [ \u0026quot;.infini_metrics*\u0026quot; ], \u0026quot;settings\u0026quot; : { \u0026quot;index\u0026quot; : { \u0026quot;format\u0026quot; : \u0026quot;7\u0026quot;, \u0026quot;lifecycle\u0026quot; : { \u0026quot;name\u0026quot; : \u0026quot;infini_metrics-30days-retention\u0026quot;, \u0026quot;rollover_alias\u0026quot; : \u0026quot;.infini_metrics\u0026quot; }, \u0026quot;codec\u0026quot; : \u0026quot;best_compression\u0026quot;, \u0026quot;number_of_shards\u0026quot; : \u0026quot;1\u0026quot;, \u0026quot;translog.durability\u0026quot;:\u0026quot;async\u0026quot; } }, \u0026quot;mappings\u0026quot; : { \u0026quot;dynamic_templates\u0026quot; : [ { \u0026quot;strings\u0026quot; : { \u0026quot;mapping\u0026quot; : { \u0026quot;ignore_above\u0026quot; : 256, \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot; : \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot; : { } } # delete old index DELETE .infini_metrics DELETE .infini_metrics-00001 PUT .infini_metrics-00001 { \u0026quot;settings\u0026quot;: { \u0026quot;index.lifecycle.rollover_alias\u0026quot;:\u0026quot;.infini_metrics\u0026quot; , \u0026quot;refresh_interval\u0026quot;: \u0026quot;5s\u0026quot; }, \u0026quot;aliases\u0026quot;:{ \u0026quot;.infini_metrics\u0026quot;:{ \u0026quot;is_write_index\u0026quot;:true } } }     If the index .infini_metrics already exists before, it needs to be deleted first.\nConfigure ILM for index .infini_alert-history #  The alert module stores a large amount of index data for execution records, so you need to configure ILM as follows:\n Expand to view settings ...  PUT _template/.infini_alert-history-rollover { \u0026quot;order\u0026quot; : 100000, \u0026quot;index_patterns\u0026quot; : [ \u0026quot;.infini_alert-history*\u0026quot; ], \u0026quot;settings\u0026quot; : { \u0026quot;index\u0026quot; : { \u0026quot;format\u0026quot; : \u0026quot;7\u0026quot;, \u0026quot;lifecycle\u0026quot; : { \u0026quot;name\u0026quot; : \u0026quot;infini_metrics-30days-retention\u0026quot;, \u0026quot;rollover_alias\u0026quot; : \u0026quot;.infini_alert-history\u0026quot; }, \u0026quot;codec\u0026quot; : \u0026quot;best_compression\u0026quot;, \u0026quot;number_of_shards\u0026quot; : \u0026quot;1\u0026quot;, \u0026quot;translog.durability\u0026quot;:\u0026quot;async\u0026quot; } }, \u0026quot;mappings\u0026quot; : { \u0026quot;dynamic_templates\u0026quot; : [ { \u0026quot;strings\u0026quot; : { \u0026quot;mapping\u0026quot; : { \u0026quot;ignore_above\u0026quot; : 256, \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot; : \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot; : { } } DELETE .infini_alert-history DELETE .infini_alert-history-00001 PUT .infini_alert-history-00001 { \u0026quot;settings\u0026quot;: { \u0026quot;index.lifecycle.rollover_alias\u0026quot;:\u0026quot;.infini_alert-history\u0026quot; , \u0026quot;refresh_interval\u0026quot;: \u0026quot;5s\u0026quot; }, \u0026quot;aliases\u0026quot;:{ \u0026quot;.infini_alert-history\u0026quot;:{ \u0026quot;is_write_index\u0026quot;:true } }, \u0026quot;mappings\u0026quot;: { \u0026quot;properties\u0026quot; : { \u0026quot;condition\u0026quot; : { \u0026quot;properties\u0026quot; : { \u0026quot;items\u0026quot; : { \u0026quot;properties\u0026quot; : { \u0026quot;expression\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;minimum_period_match\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;long\u0026quot; }, \u0026quot;operator\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;severity\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;values\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 } } }, \u0026quot;operator\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 } } }, \u0026quot;condition_result\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;object\u0026quot;, \u0026quot;enabled\u0026quot; : false }, \u0026quot;context\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;created\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;date\u0026quot; }, \u0026quot;expression\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;is_escalated\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;boolean\u0026quot; }, \u0026quot;is_notified\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;boolean\u0026quot; }, \u0026quot;message\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;objects\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;resource_id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;resource_name\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;rule_id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;rule_name\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;search_text\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;text\u0026quot;, \u0026quot;analyzer\u0026quot; : \u0026quot;suggest_text_search\u0026quot;, \u0026quot;index_prefixes\u0026quot; : { \u0026quot;min_chars\u0026quot; : 2, \u0026quot;max_chars\u0026quot; : 5 }, \u0026quot;index_phrases\u0026quot; : true }, \u0026quot;severity\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;state\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;title\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;updated\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;date\u0026quot; } } } }     Configure ILM for index .infini_activities #   Expand to view settings ...  PUT _template/.infini_activities-rollover { \u0026quot;order\u0026quot; : 100000, \u0026quot;index_patterns\u0026quot; : [ \u0026quot;.infini_activities*\u0026quot; ], \u0026quot;settings\u0026quot; : { \u0026quot;index\u0026quot; : { \u0026quot;format\u0026quot; : \u0026quot;7\u0026quot;, \u0026quot;lifecycle\u0026quot; : { \u0026quot;name\u0026quot; : \u0026quot;infini_metrics-30days-retention\u0026quot;, \u0026quot;rollover_alias\u0026quot; : \u0026quot;.infini_activities\u0026quot; }, \u0026quot;codec\u0026quot; : \u0026quot;best_compression\u0026quot;, \u0026quot;number_of_shards\u0026quot; : \u0026quot;1\u0026quot;, \u0026quot;translog.durability\u0026quot;:\u0026quot;async\u0026quot; } }, \u0026quot;mappings\u0026quot; : { \u0026quot;dynamic_templates\u0026quot; : [ { \u0026quot;strings\u0026quot; : { \u0026quot;mapping\u0026quot; : { \u0026quot;ignore_above\u0026quot; : 256, \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot; : \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot; : { } } DELETE .infini_activities DELETE .infini_activities-00001 PUT .infini_activities-00001 { \u0026quot;settings\u0026quot;: { \u0026quot;index.lifecycle.rollover_alias\u0026quot;:\u0026quot;.infini_activities\u0026quot; , \u0026quot;refresh_interval\u0026quot;: \u0026quot;5s\u0026quot; }, \u0026quot;aliases\u0026quot;:{ \u0026quot;.infini_activities\u0026quot;:{ \u0026quot;is_write_index\u0026quot;:true } } }     "});index.add({'id':13,'href':'/docs/reference/agent/install/','title':"Installing Agent",'section':"Agent",'content':"Installing The Agent #   INFINI Agent is a submodule of INFINI Console, charge of data scraping and Elasticsearch instance manage. it\u0026rsquo;s manage by INFINI Console INFINI Agent supports mainstream operating systems and platforms. The program package is small, with no extra external dependency. So, the agent can be installed very rapidly.  Before You Begin #  Install and keep INFINI Console running.\nDownload #  Download the current INFINI Agent package for your platform. https://release.infinilabs.com/agent/\nContainer Deployment #  INFINI Agent also supports Docker container deployment.\nLearn More  Configuration #  Most of the configuration of INFINI Agent can be completed using agent.yml. After the configuration is modified, the agent program needs to be restarted to make the configuration take effect.\nAfter unzip the file and open agent.yml, you will see this:\n#Used to store data for INFINI Console And Agent #Elasticsearch cluster version should be v7.3+ elasticsearch: - name: default enabled: true monitored: false endpoint: http://192.168.3.4:9200 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB ... #INFINI Console Endpoint agent.manager.endpoint: http://192.168.3.4:9000 In most case, you only need to config the endpoint, but if Elasticsearch has security authentication enabled,then config the username and password.\nThe user must have access to the cluster metadata,index metadata,and all indexes with .infini prefix.\nStarting the Agent #  Run the agent program to start INFINI Agent, as follows:\n _ ___ __ __ _____ /_\\ / _ \\ /__\\/\\ \\ \\/__ \\ //_\\\\ / /_\\//_\\ / \\/ / / /\\/ / _ \\/ /_\\\\//__/ /\\ / / / \\_/ \\_/\\____/\\__/\\_\\ \\/ \\/ [AGENT] A light-weight, powerful and high-performance elasticsearch agent. [AGENT] 0.1.0#14, 2022-08-26 14:09:29, 2025-12-31 10:10:10, 4489a8dff2b68501a0dd9ae15276cf5751d50e19 [08-31 15:52:07] [INF] [app.go:164] initializing agent. [08-31 15:52:07] [INF] [app.go:165] using config: /Users/INFINI/agent/agent-0.1.0-14-mac-arm64/agent.yml. [08-31 15:52:07] [INF] [instance.go:72] workspace: /Users/INFINI/agent/agent-0.1.0-14-mac-arm64/data/agent/nodes/cc7h5qitoaj25p2g9t20 [08-31 15:52:07] [INF] [metrics.go:63] ip:192.168.3.22, host:INFINI-MacBook.local, labels:, tags: [08-31 15:52:07] [INF] [api.go:261] api listen at: http://0.0.0.0:8080 [08-31 15:52:07] [INF] [module.go:116] all modules are started [08-31 15:52:07] [INF] [manage.go:180] register agent to console [08-31 15:52:07] [INF] [actions.go:367] elasticsearch [default] is available [08-31 15:52:07] [INF] [manage.go:203] registering, waiting for review [08-31 15:52:07] [INF] [app.go:334] agent is up and running now. If the above startup information is displayed, the agent is running successfully and listening on the responding port.\nBut now agent can\u0026rsquo;t work normally util it\u0026rsquo;s being added to INFINI Console. See Agent Manage\nShutting Down the Agent #  To shut down INFINI Agent, hold down Ctrl+C. The following information will be displayed:\n^C [AGENT] got signal: interrupt, start shutting down [08-31 15:57:13] [INF] [module.go:145] all modules are stopped [08-31 15:57:13] [INF] [app.go:257] agent now terminated. [AGENT] 0.1.0, uptime: 5m6.240314s __ _ __ ____ __ _ __ __ / // |/ // __// // |/ // / / // || // _/ / // || // / /_//_/|_//_/ /_//_/|_//_/ ©INFINI.LTD, All Rights Reserved. System Service #  To run the INFINI Agent as a system service, run the following commands:\n➜ ./agent -service install Success ➜ ./agent -service start Success Uninstall service:\n➜ ./agent -service stop Success ➜ ./agent -service uninstall Success "});index.add({'id':14,'href':'/docs/reference/alerting/channel/','title':"Alerting Channels",'section':"Alerting",'content':"Alerting Channels #  Introduction #  The alerting channel is used to configure the channel for sending notification messages when an alerting rule is triggered. Currently, webhook is supported.\nChannes list #  In the channels list, you can query the channels that have been added\nNew alerting channel #  Click the New button on the channels list page to enter the new alerting channel page\n Input channel name (required) Select channel type (currently only webhook is supported) Input the webhook address Select the method of HTTP request, the default is POST Add HTTP request headers as needed Configure the webhook request body Click the save button to submit  Update channel configuration #  Select the channel to be updated in the channels list and click the Edit button to enter the update channel configuration page\nFor operation reference, create an alerting channel\ndelete alerting channel #  Click the delete button in the alerting channels list table to confirm the second time, and execute the delete operation after confirming the deletion.\n"});index.add({'id':15,'href':'/docs/reference/data/alias/','title':"Alias Management",'section':"Data",'content':"Alias Management #  Alias list #  The alias list includes addition, deletion, modification, and search operations for aliases.\nNew alias #   Alias: Input an alias name Index: Select the target index corresponding to the alias, and use (*) to bind multiple indexes. Is Write Index: specify whether the selected index is writable. If the alias only binds one index, the index is writable by default; if multiple indexes are bound by (*), it is most necessary to specify one of the indexes as writable .  Alias and index relationship list #  Clicking the + button at the beginning of the alias list row will expand and display the index list bound to the alias, and at the same time, you can set and delete the relational binding update of the index.\n"});index.add({'id':16,'href':'/docs/tutorials/create_readonly_account/','title':"How to easily create an Elasticsearch \"guest\" user",'section':"Tutorials",'content':"How to easily create an Elasticsearch \u0026ldquo;guest\u0026rdquo; user #  Introduction #  In some cases, we want to share some functions or data with customers, but do not want the data to be modified. At this point we need to create a \u0026ldquo;guest\u0026rdquo; user. This article briefly describes how to create a \u0026ldquo;guest\u0026rdquo; user using the INFINI Console.\nPrepare #   Download and install the latest version of INFINI Console Enable INFINI Console Security Features  Creating a Role #  Click System \u0026gt; Security Settings on the left menu of INFINI Console, and select the Role Tab page to enter the role management page.\nNew platform role readonly #  Click the New button, select the platform role, and create a new platform role readonly. The operation steps are as follows:\n Input role name readonly Expand all functional permissions Read permission is selected for all other functions except the security functions under the system settings. Security feature under System Settings is set to None permission. Click the save button to submit   Selecting the All permission of a function represents the read and write operation permission of this function, Read means only have read permission, None means no permission for this function (the function is not available in the menu after the user logs in)\n New data role es-v7171 #  Click the New button, select the data role, and create a new data role es-v7171. The operation steps are as follows:\n Input role name es-v7171 Cluster permission select cluster es-v7171 Click the save button to submit  New account guest #  Click the left menu of INFINI Console System \u0026gt; Security Settings, select the User Tab page to enter the Account Management page. Click the New button to create a new account guest and assign the account role readonly, es-v7171\nClick Save and submit. After the creation is successful, you can use the guest account to log in to the INFINI Console and only have read-only permissions.\n"});index.add({'id':17,'href':'/docs/tutorials/role_with_different_rights/','title':"How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts",'section':"Tutorials",'content':"How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts #  Introduction #  This article will introduce the use of INFINI Console to assign two different Elasticsearch cluster management permissions to two different accounts\nPrepare #   Download and install the latest version of INFINI Console Enable INFINI Console Security Features Register at least two Elasticsearch clusters to the INFINI Console  Creating a Role #  Click System \u0026gt; Security Settings on the left menu of INFINI Console, and select the Role Tab page to enter the role management page.\nNew platform role platform_role #  Click the New button, select the platform role, and create a new platform role platform_role. The operation steps are as follows:\n Input role name platform_role Expand all functional permissions Except for the security functions under the system settings, select the All permission for all other functions. Security feature under System Settings is set to None permission. Click the save button to submit   Selecting the All permission of a function represents the read and write operation permission of this function, Read means only have read permission, None means no permission for this function (the function is not available in the menu after the user logs in)\n New data role es-v7171 #  Click the New button, select the data role, and create a new data role es-v7171\nNew data role es-v630 #  Click the New button, select the data role, create a new data role es-v630, the configuration is similar to the role es-v7171\nCreate Account #  Click the left menu of INFINI Console System \u0026gt; Security Settings, select the User Tab page to enter the Account Management page.\nNew account zhangsan #  Click the New button to create a new account zhangsan and assign the account role platform_role, es-v717\nClick the save button to submit after the creation is successful, save the account password\nNew account wangwu #  Click the New button to create a new account wangwu, and assign the account roles platform_role, es-v630, the configuration is similar to the account zhangsan\nLogin with administrator account #  After logging in with the administrator account, view the platform overview, and you can see all 13 registered clusters\nLogin with account zhangsan #  After logging in with the account zhangsan and viewing the platform overview, you can only see the cluster es-v7171\nLogin with account wangwu #  After logging in with the account zhangsan and viewing the platform overview, you can only see the cluster es-v630\nSummary #  By creating different roles and granting different Elasticsearch cluster permissions, and then assigning roles to users, we can quickly implement Grant different Elasticsearch cluster permissions to different users.\n"});index.add({'id':18,'href':'/docs/tutorials/role_with_index_limit/','title':"How to assign Elasticsearch index-level permissions to INFINI Console accounts",'section':"Tutorials",'content':"How to assign Elasticsearch index-level permissions to INFINI Console accounts #  Introduction #  This article will introduce the use of INFINI Console to limit an account to only have the management permissions of certain indexes in the Elasticsearch cluster\nPrepare #   Download and install the latest version of INFINI Console Enable INFINI Console Security Features Register at least two Elasticsearch clusters to the INFINI Console  Creating a Role #  Click System \u0026gt; Security Settings on the left menu of INFINI Console, and select the Role Tab page to enter the role management page.\nNew platform role platform_role #  Click the New button, select the platform role, and create a new platform role platform_role\nNew data role test_index_only #  Click the New button, select the data role, create a new data role test_index_only, and then configure the following:\n Select only es-v7140 for the cluster (restrict access to this role only to the Elasticsearch cluster es-v7140) Set index permissions to index only enter the index pattern test* (restrict the role to only index access permissions whose index name matches test*)  After the configuration is complete, click the Save button to submit.\nCreate Account #  Click the left menu of INFINI Console System \u0026gt; Security Settings, select the User Tab page to enter the Account Management page.\nNew account liming #  Click the New button to create a new account liming and assign the account roles platform_role, test_index_only\nClick the save button to submit after the creation is successful, save the account password\nLogin with administrator account #  After logging in with the administrator account, click the menu Data \u0026gt; Index Management, select the cluster es-v7140, and you can see:\nLogin with account liming #  After logging in with the account liming, click the menu Data \u0026gt; Index Management, select the cluster es-v7140, and then you can see:\nSummary #  By specifying the role\u0026rsquo;s Elasticsearch cluster permissions and indexing permissions, it is easy to precisely control user permissions down to the indexing level.\n"});index.add({'id':19,'href':'/docs/reference/data/view/','title':"Data View",'section':"Data",'content':"Data View #  View list #  Creating and managing data views can help you better get data from Elasticsearch.\nCreate data view #  Step 1 Define the data view #   Input a view name Matching rules: Match the corresponding index, you can also use (*) to match multiple indexes.  Step 2 Configuration #    Select time field as time filter for view index\n  Created\n  Edit data view #  The page lists all fields that match the index, and you can set the Format, Popularity, etc. of the fields.\n"});index.add({'id':20,'href':'/docs/reference/agent/docker/','title':"Container Deployment",'section':"Agent",'content':"Container Deployment #  INFINI Agent supports container deployment.\nDownload Image #  The images of INFINI Agent are published at the official repository of Docker. The URL is as follows: https://hub.docker.com/r/infinilabs/agent\nRun the following command:\ndocker pull infinilabs/agent:latest Verifying the Image #  After downloading the image locally, you will notice that the container image of INFINI Agent is very small, with a size less than 25 MB. So, the downloading is very fast.\n✗ docker images REPOSITORY TAG IMAGE ID CREATED SIZE infinilabs/agent latest c7bd9ad063d9 4 days ago 13.8MB Configuration #  Create a configuration file agent.yml to perform basic configuration as follows:\napi: enabled: true network: binding: 0.0.0.0:8080 metrics: enabled: true queue: metrics network: enabled: true summary: true details: true memory: metrics: - swap - memory disk: metrics: - ioqs - usage cpu: metrics: - idle - system - user - iowait - load elasticsearch: enabled: true agent_mode: true node_stats: true index_stats: true cluster_stats: true elasticsearch: - name: default enabled: true endpoint: http://192.168.3.4:9200 monitored: false discovery: enabled: true pipeline: - name: metrics_ingest auto_start: true keep_running: true processor: - json_indexing: index_name: \u0026quot;.infini_metrics\u0026quot; elasticsearch: \u0026quot;default\u0026quot; input_queue: \u0026quot;metrics\u0026quot; output_queue: name: \u0026quot;metrics_requests\u0026quot; label: tag: \u0026quot;metrics\u0026quot; worker_size: 1 bulk_size_in_mb: 10 - name: consume-metrics_requests auto_start: true keep_running: true processor: - bulk_indexing: bulk: compress: true batch_size_in_mb: 10 batch_size_in_docs: 5000 consumer: fetch_max_messages: 100 queues: type: indexing_merge when: cluster_available: [ \u0026quot;default\u0026quot; ] agent: major_ip_pattern: \u0026quot;192.*\u0026quot; labels: env: dev tags: - linux - x86 - es7 - v7.5 path.data: data path.logs: log agent.manager.endpoint: http://192.168.3.4:9000 Note: In the above configuration, replace the Elasticsearch configuration with the actual server connection address and authentication information.\nStarting #  Run the following command:\ndocker run -p 8080:8080 -v=`pwd`/agent.yml:/agent.yml infinilabs/agent:latest Docker Compose #  You can also use docker compose to manage container instances. Create one docker-compose.yml file as follows:\nversion: \u0026quot;3.5\u0026quot; services: infini-agent: image: infinilabs/agent:latest ports: - 8080:8080 container_name: \u0026quot;infini-agent\u0026quot; volumes: - ./agent.yml:/agent.yml volumes: dist: Run the following command to start INFINI Agent.\n➜ docker-compose up Recreating infini-agent ... done Attaching to infini-agent infini-agent | _ ___ __ __ _____ infini-agent | /_\\ / _ \\ /__\\/\\ \\ \\/__ \\ infini-agent | //_\\\\ / /_\\//_\\ / \\/ / / /\\/ infini-agent | / _ \\/ /_\\\\//__/ /\\ / / / infini-agent | \\_/ \\_/\\____/\\__/\\_\\ \\/ \\/ infini-agent | infini-agent | [AGENT] A light-weight, powerful and high-performance elasticsearch agent. infini-agent | [AGENT] 0.1.0_SNAPSHOT#15, 2022-08-26 15:05:43, 2025-12-31 10:10:10, 164bd8a0d74cfd0ba5607352e125d72b46a1079e infini-agent | [08-31 09:11:45] [INF] [app.go:164] initializing agent. infini-agent | [08-31 09:11:45] [INF] [app.go:165] using config: /agent.yml. infini-agent | [08-31 09:11:45] [INF] [instance.go:72] workspace: /data/agent/nodes/cc7ibke5epac7314bf9g infini-agent | [08-31 09:11:45] [INF] [metrics.go:63] ip:172.18.0.2, host:bd9f43490911, labels:, tags: infini-agent | [08-31 09:11:45] [INF] [api.go:261] api listen at: http://0.0.0.0:8080 infini-agent | [08-31 09:11:45] [INF] [actions.go:367] elasticsearch [default] is available infini-agent | [08-31 09:11:45] [INF] [module.go:116] all modules are started infini-agent | [08-31 09:11:45] [INF] [manage.go:180] register agent to console infini-agent | [08-31 09:11:45] [INF] [app.go:334] agent is up and running now. "});index.add({'id':21,'href':'/docs/getting-started/docker/','title':"Docker",'section':"Quick Start",'content':"Container Deployment #  INFINI Console supports container deployment.\nDownloading an Image #  The images of INFINI Console are published at the official repository of Docker. The URL is as follows:\n https://hub.docker.com/r/infinilabs/console\nUse the following command to obtain the latest container image:\ndocker pull infinilabs/console:latest Verifying the Image #  After downloading the image locally, you will notice that the container image of INFINI Console is very small, with a size less than 30 MB. So, the downloading is very fast.\n✗ docker images REPOSITORY TAG IMAGE ID CREATED SIZE infinilabs/console latest 8c27cd334e4c 47 minutes ago 26.4MB Create configuration #  Now you need to create a configuration file console.yml for basic configuration, as follows:\n# for this System Cluster, please use Elasticsearch v7.3+ elasticsearch: - name: default enabled: true monitored: false endpoint: http://192.168.3.188:9299 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB discovery: enabled: true web: enabled: true embedding_api: true auth: enabled: true ui: enabled: true path: .public vfs: true local: true network: binding: 0.0.0.0:9000 skip_occupied_port: true gzip: enabled: true elastic: elasticsearch: default enabled: true remote_configs: true health_check: enabled: true interval: 30s availability_check: enabled: true interval: 60s metadata_refresh: enabled: true interval: 30s cluster_settings_check: enabled: true interval: 20s store: enabled: false orm: enabled: true init_template: true template_name: \u0026quot;.infini\u0026quot; index_prefix: \u0026quot;.infini_\u0026quot; metrics: enabled: true major_ip_pattern: \u0026quot;192.*\u0026quot; queue: metrics elasticsearch: enabled: true cluster_stats: true node_stats: true index_stats: true pipeline: - name: indexing_merge auto_start: true keep_running: true processor: - indexing_merge: input_queue: \u0026quot;metrics\u0026quot; elasticsearch: \u0026quot;default\u0026quot; index_name: \u0026quot;.infini_metrics\u0026quot; output_queue: name: \u0026quot;metrics_requests\u0026quot; label: tag: \u0026quot;metrics\u0026quot; worker_size: 1 bulk_size_in_mb: 10 - name: consume-metrics_requests auto_start: true keep_running: true processor: - bulk_indexing: bulk: compress: true batch_size_in_mb: 10 batch_size_in_docs: 5000 consumer: fetch_max_messages: 100 queues: type: indexing_merge when: cluster_available: [ \u0026quot;default\u0026quot; ] - name: metadata_ingest auto_start: true keep_running: true processor: - metadata: bulk_size_in_mb: 10 bulk_max_docs_count: 5000 fetch_max_messages: 1000 elasticsearch: \u0026quot;default\u0026quot; queues: type: metadata category: elasticsearch consumer: group: metadata when: cluster_available: [ \u0026quot;default\u0026quot; ] - name: activity_ingest auto_start: true keep_running: true processor: - activity: bulk_size_in_mb: 10 bulk_max_docs_count: 5000 fetch_max_messages: 1000 elasticsearch: \u0026quot;default\u0026quot; queues: category: elasticsearch activity: true consumer: group: activity when: cluster_available: [ \u0026quot;default\u0026quot; ] Note: Please change the relevant configuration of Elasticsearch in the above configuration to the actual server connection address and authentication information, which requires version v7.3 or above.\nStarting the Console #  Use the following command to start the INFINI Console container:\ndocker run -p 9000:9000 -v=`pwd`/console.yml:/console.yml infinilabs/console:latest Docker Compose #  You can also use docker compose to manage container instances. Create one docker-compose.yml file as follows:\nversion: \u0026quot;3.5\u0026quot; services: infini-console: image: infinilabs/console:latest ports: - 9000:9000 container_name: \u0026quot;infini-console\u0026quot; volumes: - ../console.yml:/console.yml volumes: dist: In the directory where the configuration file resides, run the following command to start INFINI Console.\n➜ docker-compose up "});index.add({'id':22,'href':'/docs/reference/system/security/role/','title':"Role",'section':"Security",'content':"Role Management #  Introduction #  Role Management includes CURD operations for role. And INFINI Console has a builtin role named Administrator, it has all privileges , includes Platform and Data. The data role can help us control privileges of elasticsearch, includes elasticsearch api privileges which can be configured in the file config/permission.json of your setup path.\nCreate Platform Role #   Input role name, role name should be unique. Select feature privileges, can not be empty. Input a description if needed  All privilege represents both read and write permission, Read privilege represents only read permission, and None privilege represents no permission\nCreate Data Role #   Input role name, role name should be unique. Select one or more cluster, * represents all clusters. Config cluster api privileges, * represents all privileges. Config index api privileges, * represents all privileges. Input a description if needed  Search Role #  Input a keyword and click the search button to query roles.\nUpdate Platform Role #  Modify the role as needed, and then click the Save button to submit.\nUpdate Data Role #  Modify the role as needed, and then click the Save button to submit.\n"});index.add({'id':23,'href':'/docs/reference/system/security/user/','title':"User",'section':"Security",'content':"User Management #  Introduction #  User Management includes CURD operations and reset password for user.\nCreate User #   User name is required, and it should be unique. Nick name, phone, email, is optional. Select one or more role. Tags is optional, it helps you group users.  Search User #  Input keywords and click the search button to query users.\nUpdate User #  Modify as needed, and then click the Save button to submit.\nReset User password #  Input the new password and then click the save button to reset the password.\n"});index.add({'id':24,'href':'/docs/screenshots/','title':"Screenshots",'section':"Docs",'content':"Screenshots #  Cluster Overview #  Cluster Activities #  Alerting #  Cluster Monitoring #  Data Management #  Developer Tool #  Cluster Management #  Security #  "});index.add({'id':25,'href':'/docs/reference/data/discover/','title':"Discover",'section':"Data",'content':"Discover #  Introduction #  In Discover, you can search and query the data under the index or view according to conditions such as time and fields. The data display methods include regular mode and Insight mode.\nSearch toolbar #  Index (View) #  Search Statement #  Time Range #  Field Filter #  Save Search #  Saved Search List #  Insight Mode Switch #  Insight Configuration #  Normal Mode #  Flexibly add fields to data content with multi-function charts in normal mode\nEdit, delete, etc. document data\nInsight Mode #  In Insight mode, visual charts will be pushed to display data according to data characteristics\nCharts can be added via push list\nEdit(Remove) chart widget\n"});index.add({'id':26,'href':'/docs/reference/system/security/','title':"Security",'section':"System",'content':"Security #  Introduction #  INFINI Console Security provides the following security benefits and capabilities:\n Grant different platform privileges to different users Grant different elasticsearch cluster privileges to users, include indices level and API level  INFINI Console Security has two role type\n Platform Role，used to control platform privileges Data Role, used to control data privileges  INFINI Console Security is enabled by default，and we can disable it by configure section web\u0026gt;auth\u0026gt;enabled to false in config file cosnole.yml as follows：\nweb: enabled: true embedding_api: true auth: enabled: false ui: enabled: true path: .public vfs: true local: true network: binding: 0.0.0.0:9000 skip_occupied_port: true gzip: enabled: true  Password is required to login INFINI Console when Security is enabled 。INFINI Console has a builtin account with both username and password are admin 。\n "});index.add({'id':27,'href':'/docs/user-cases/','title':"User Cases",'section':"Docs",'content':"User Cases #  Who Is Using ? #  If you are using INFINI Console and feel it good enough to tell others you are using it, please leave a message in Github Discussion to let us know. Thank you for your support and encouragement.\nUsers in China #            "});index.add({'id':28,'href':'/docs/reference/system/security/settings/','title':"Settings",'section':"Security",'content':"Settings #  Disable built-in users #  When the security is turned on, start the console without specifying the user and password, the system will have a The default built-in user admin. The built-in user can be disabled after adding a new user with administrator privileges.\n Can\u0026rsquo;t disable yourself using built-in user  "});index.add({'id':29,'href':'/docs/troubleshooting/','title':"FAQs",'section':"Docs",'content':"FAQs and Troubleshooting #  FAQs about INFINI Console and handling methods are provided here. You are welcome to submit your problems here.\nCommon Faults #  Nginx is added in front of Elasticsearch, and the console prompts a 400 error #  Similar error logs are as follows:\n[11-25 18:26:58] [TRC] [v0.go:390] search response: {\u0026quot;query\u0026quot;:{\u0026quot;match\u0026quot;:{\u0026quot;status\u0026quot;: \u0026quot;RUNNING\u0026quot;}}},\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;title\u0026gt;Error 400 (Bad Request)!!1\u0026lt;/title\u0026gt; \u0026lt;p\u0026gt;\u0026lt;b\u0026gt;400.\u0026lt;/b\u0026gt; \u0026lt;ins\u0026gt;That’s an error.\u0026lt;/ins\u0026gt; \u0026lt;p\u0026gt;Your client has issued a malformed or illegal request. \u0026lt;ins\u0026gt;That’s all we know.\u0026lt;/ins\u0026gt; [11-25 18:26:58] [ERR] [init.go:87] json: invalid character '\u0026lt;' looking for beginning of value: \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=en\u0026gt; Fault Description #  Nginx does not support passing request body for GET request type\nSolution #  Recommended to upgrade to the latest version.\nMonitoring data is not displayed after the cluster is registered #  as shown below:\nFault Description #  INFINI Console needs to use some features of Elasticsearch 7.0 and above\nSolution #  Upgrade the Elasticsearch cluster version of the INFINI Console storage data to v7.0+\nStartup Error #  [03-23 08:38:20] [ERR] [metadata.go:529] {\u0026quot;error\u0026quot;:{\u0026quot;root_cause\u0026quot;:[{\u0026quot;type\u0026quot;:\u0026quot;illegal_argument_exception\u0026quot;,\u0026quot;reason\u0026quot;:\u0026quot;Can't merge a non object mapping [payload.node_state.settings.http.type] with an object mapping [payload.node_state.settings.http.type]\u0026quot;}],\u0026quot;type\u0026quot;:\u0026quot;illegal_argument_exception\u0026quot;,\u0026quot;reason\u0026quot;:\u0026quot;Can't merge a non object mapping [payload.node_state.settings.http.type] with an object mapping [payload.node_state.settings.http.type]\u0026quot;},\u0026quot;status\u0026quot;:400} or\n[04-16 09:45:06] [ERR] [schema.go:144] error on update mapping: {\u0026quot;root_cause\u0026quot;:[{\u0026quot;type\u0026quot;:\u0026quot;mapper_parsing_exception\u0026quot;,\u0026quot;reason\u0026quot;:\u0026quot;Failed to parse mapping [_doc]: analyzer [suggest_text_search] has not been configured in mappings\u0026quot;}],\u0026quot;type\u0026quot;:\u0026quot;mapper_parsing_exception\u0026quot;,\u0026quot;reason\u0026quot;:\u0026quot;Failed to parse mapping [_doc]: analyzer [suggest_text_search] has not been configured in mappings\u0026quot;,\u0026quot;caused_by\u0026quot;:{\u0026quot;type\u0026quot;:\u0026quot;illegal_argument_exception\u0026quot;,\u0026quot;reason\u0026quot;:\u0026quot;analyzer [suggest_text_search] has not been configured in mappings\u0026quot;}} Fault Description #  Version v0.3 modified the Template and Mapping, if the index already exists and the Mapping is not of the expected object type, then the error will be show up.\nFor upgrade, please refer to the upgrade instructions.\nSolution #   stop console delete template .infini  DELETE _template/.infini  delete index .infini_node and .infini_index  DELETE .infini_node DELETE .infini_index  start console  "});index.add({'id':30,'href':'/docs/tutorials/cluster_health_change/','title':"How to Monitor Elasticsearch Cluster Health",'section':"Tutorials",'content':"How to Monitor Elasticsearch Cluster Health #  Introduction #  In many cases, the cluster health status of the Elasticsearch cluster will turn red for some reason. At this time, at least one primary shard in the Elasticsearch cluster is unallocated or lost. So it is necessary to monitor the health status of the Elasticsearch cluster. This article will introduce how to use the INFINI Console alerting feature to monitor the health of an Elasticsearch cluster.\nPrepare #   Download and install the latest version of INFINI Console Register Elasticsearch cluster using INFINI Console  Create alerting rule #  Open INFINI Console in the browser, click on the left menu \u0026ldquo;Alerting\u0026rdquo; \u0026gt; Rules to enter the alerting management page, and then click New button to enter the Create Alerting Rule page. Follow these steps to create an alerting rule:\n Select the cluster (here you need to select the Elasticsearch cluster where the INFINI Console stores data, that is, the Elasticsearch cluster configured in the configuration file console.yml, if it is not registered to the INFINI Console, please register first) Select the alerting object .infini_metrics (select the index under the Elasticsearch cluster, or enter the index pattern, because the monitoring data collected by the INFINI Console is stored in the index .infini_metrics) Input filter condition (Elasticsearch query DSL) Here we need to filter the data whose monitoring metrics category is cluster_health and the health status is red. The DSL is as follows:  { \u0026quot;bool\u0026quot;: { \u0026quot;must\u0026quot;: [ { \u0026quot;match\u0026quot;: { \u0026quot;payload.elasticsearch.cluster_health.status\u0026quot;: \u0026quot;red\u0026quot; } }, { \u0026quot;term\u0026quot;: { \u0026quot;metadata.name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;cluster_health\u0026quot; } } } ] } }  Select time field and stat period for date histogram aggregation   Input the rule name Group settings (optional, multiple can be configured), set when statistical metrics need to be grouped, because all registered to INFINI Console The Elasticsearch cluster monitoring metrics are stored in the index .infini_metrics, so they need to be grouped according to the cluster ID, Here we choose metadata.labels.cluster_id Configure the alerting metrics, select the aggregation field payload.elasticsearch.cluster_health.status, and the statistical method count Configure the alerting condition, configure the continue for one period and the aggregation result is greater than or equal to 1, that is, the Critical alerting is triggered Set the execution period, here is configured to execute a check every minute Set the event title, the event title is a template, you can use template variables, template syntax and template variable usage reference here Set the event content, the event content is a template, you can use template variables, template syntax and template variable usage reference here   Turn on the configure alerting channel switch, and select add in the upper right corner to quickly select an alerting channel template to fill. For how to create an alerting channel template, please refer to here Set the silence period to 1 hour, that is, after the alerting rule is triggered, the notification message will only be sent once within an hour Set the receiving period, the default is 00:00-23:59, that is, you can receive notification messages throughout the day  After the settings are complete, click the Save button to submit.\nSimulate trigger alerting rule #  Open the INFINI Console Dev tools (Ctrl+Shift+O) and enter the command as shown below:\nReceive alert notification message #  After waiting for about a minute, you will receive a DingTalk alerting notification as follows:\nYou can see that the alerting notification message shows the ID of the Elasticsearch cluster whose health status has turned red. Click the link below the message to view the alerting details as follows:\nView the alerting message center #  In addition to receiving external notification messages, the INFINI Console Alert Message Center also generates an alert message. Click menu Alerting \u0026gt; Alerting Center to enter\nSummary #  By using the INFINI Console alerting function, you can easily monitor the health status of the Elasticsearch cluster. After configuring alerting rule,As soon as any Elasticsearch cluster status turns red, an alert is triggered and an alert message is sent.\n"});index.add({'id':31,'href':'/docs/tutorials/cluster_node_disk_usage/','title':"How to monitor Elasticsearch cluster node disk usage",'section':"Tutorials",'content':"How to monitor Elasticsearch cluster node disk usage #  Introduction #  When the system disk usage is too high, data cannot be written into the Elasticsearch cluster, which is likely to result in data loss. Therefore, monitor the Elasticsearch cluster. Node disk usage is necessary. This article will show you how to monitor your Elasticsearch cluster using INFINI Console alerts Node disk usage.\nPrepare #   Download and install the latest version of INFINI Console Register Elasticsearch cluster using INFINI Console  Create alerting rule #  Open INFINI Console in the browser, click on the left menu \u0026ldquo;Alerting\u0026rdquo; \u0026gt; Rules to enter the alerting management page, and then click New button to enter the Create Alerting Rule page. Follow these steps to create an alerting rule:\n Select the cluster (here you need to select the Elasticsearch cluster where the INFINI Console stores data, that is, the Elasticsearch cluster configured in the configuration file console.yml, if it is not registered to the INFINI Console, please register first) Input the alerting object .infini_metrics* (select the index under the Elasticsearch cluster, or enter the index pattern, because the monitoring data collected by the INFINI Console is stored in the index .infini_metrics) Input filter criteria (Elasticsearch query DSL) Here we need to filter the monitoring metrics category to node_stats, the DSL is as follows:  { \u0026quot;bool\u0026quot;: { \u0026quot;must\u0026quot;: [ { \u0026quot;term\u0026quot;: { \u0026quot;metadata.name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;node_stats\u0026quot; } } } ] } }  Select time field timestamp and statistical period for date histogram aggregation   Input the rule name Group settings (optional, multiple can be configured), set when statistical metrics need to be grouped, because all registered to INFINI Console The Elasticsearch cluster monitoring metrics are stored in the index .infini_metrics, so you need to group according to the cluster ID first, and then group according to the node ID, Here we choose metadata.labels.cluster_id and metadata.labels.node_id Configure the alerting metrics, select the aggregation field payload.elasticsearch.node_stats.fs.total.free_in_bytes, and the statistics method avg. Then add another alerting metrics, select the aggregation field payload.elasticsearch.node_stats.fs.total.total_in_bytes, and the statistical method avg. Configure the metrics formula (when more than one alerting metrics is configured, you need to set a formula to calculate the target metrics), where the formula fx is configured as ((b-a)/b)*100, which means to use the total Disk space subtract remaining disk space to get disk used space, Then divide disk used space by total disk space and multiply by 100 to get disk usage Configure the alerting conditions, here configure three alerting conditions, configure the P2(Medium) alerting when the disk usage is greater than 80 for persisting for one period; Configure the continue for one period when the disk usage is greater than 90, trigger the P1(High) alerting; Configure persisting for a period when the disk usage rate is greater than 95, trigger the P0(Critical) alerting; Set the execution period, here is configured to execute a check every minute Set the event title, the event title is a template, you can use template variables, template syntax and template variable usage reference here Set the event content, the event content is a template, you can use template variables, template syntax and template variable usage reference here  Priority:{{.priority}} Timestamp:{{.timestamp | datetime}} RuleID:{{.rule_id}} EventID:{{.event_id}} {{range.results}} ClusterID: {{index.group_values ​​0}}; NodeID: {{index.group_values ​​1}}; Disk Usage:{{.result_value | to_fixed 2}}%; Free Storage: {{.relation_values.a | format_bytes 2}}; {{end}}  Turn on the configure alerting channel switch, and select add in the upper right corner to quickly select an alerting channel template to fill. For how to create an alerting channel template, please refer to here Set the silence period to 1 hour, that is, after the alerting rule is triggered, the notification message will only be sent once within an hour Set the receiving period, the default is 00:00-23:59, that is, you can receive notification messages throughout the day  After the settings are complete, click the Save button to submit.\nReceive alert notification message #  Wait for a while, and receive the DingTalk alerting message notification as follows:\nYou can see that the alert notification message displays the Elasticsearch cluster ID, node ID, and remaining disk space with high disk usage.\nView the alerting message center #  In addition to receiving external notification messages, the INFINI Console Alert Message Center also generates an alert message. Click menu Alerting \u0026gt; Alerting Center to enter\nSummary #  By using the INFINI Console alerting function, you can easily monitor the disk usage of Elasticsearch cluster nodes. After configuring alerting rule, Once the disk usage of any Elasticsearch node exceeds the set threshold, an alert will be triggered and an alert message will be sent.\n"});index.add({'id':32,'href':'/docs/tutorials/cluster_slow_request/','title':"How to monitor slow query requests in Elasticsearch",'section':"Tutorials",'content':"How to monitor slow query requests in Elasticsearch #  Introduction #  Many times, the Elasticsearch cluster will experience peak data writing or query traffic. At this time, the Elasticsearch cluster will be under a lot of pressure. Through the monitoring and alertinging of the delay of the Elasticsearch index query. This allows us to locate which indexes are the most stressed on the Elasticsearch cluster. This article will introduce how to use the INFINI Console alerting function to monitor the slow query request index in Elasticsearch.\nPrepare #   Download and install the latest version of INFINI Console Register Elasticsearch cluster using INFINI Console  Create alerting rule #  Open INFINI Console in the browser, click on the left menu \u0026ldquo;Alerting\u0026rdquo; \u0026gt; Rules to enter the alerting management page, and then click New button to enter the Create Alerting Rule page. Follow these steps to create an alerting rule:\n Select the cluster (here you need to select the Elasticsearch cluster where the INFINI Console stores data, that is, the Elasticsearch cluster configured in the configuration file console.yml, if it is not registered to the INFINI Console, please register first) Input the alerting object .infini_metrics* (select the index under the Elasticsearch cluster, or enter the index pattern, because the monitoring data collected by the INFINI Console is stored in the index .infini_metrics) Input filter criteria (Elasticsearch query DSL) Here we need to filter the monitoring metrics category to index_stats, and the index name cannot be _all, the DSL is as follows:  { \u0026quot;bool\u0026quot;: { \u0026quot;must\u0026quot;: [ { \u0026quot;term\u0026quot;: { \u0026quot;metadata.name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;index_stats\u0026quot; } } }, { \u0026quot;term\u0026quot;: { \u0026quot;metadata.category\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;elasticsearch\u0026quot; } } } ], \u0026quot;must_not\u0026quot;: [ { \u0026quot;term\u0026quot;: { \u0026quot;metadata.labels.index_name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;_all\u0026quot; } } } ] } }  Select time field timestamp and statistical period for date histogram aggregation   Input the rule name Group settings (optional, multiple can be configured), set when statistical metrics need to be grouped, because all registered to INFINI Console The Elasticsearch cluster monitoring metrics are stored in the index .infini_metrics, so you need to group according to the cluster ID first, and then group according to the index name, Here we choose metadata.labels.cluster_id and metadata.labels.index_name Configure the alerting metrics, select the aggregation field payload.elasticsearch.index_stats.total.search.query_time_in_millis, and use the statistical method to derive derivative. Then add another alerting metrics, select the aggregation field payload.elasticsearch.index_stats.total.search.query_total, and the statistical method derivative. Configure the metrics formula (when more than one alerting metrics is configured, you need to set a formula to calculate the target metrics), where the formula fx is configured as a/b to calculate the delay, Configure the alerting conditions, three alerting conditions are configured here, and when the continue for one cycle delay is greater than 100, the P3(Low) alerting is triggered; Configure the Continue for one cycle delay when the delay is greater than 500, trigger the P1(High) alerting; Configure continue for one cycle when the delay is greater than 1000, trigger the P0(Critical) alerting; Set the execution period, here is configured to execute a check every minute Set the event title, the event title is a template, you can use template variables, template syntax and template variable usage reference here Set the event content, the event content is a template, you can use template variables, template syntax and template variable usage reference here  Priority:{{.priority}} Timestamp:{{.timestamp | datetime_in_zone \u0026quot;Asia/Shanghai\u0026quot;}} RuleID:{{.rule_id}} EventID:{{.event_id}} {{range.results}} ClusterID:{{index.group_values ​​0}}; Index name:{{index.group_values ​​1}}; Current value:{{.result_value | to_fixed 2}}ms; {{end}}  Turn on the configure alerting channel switch, and select add in the upper right corner to quickly select an alerting channel template to fill. For how to create an alerting channel template, please refer to here Set the silence period to 1 hour, that is, after the alerting rule is triggered, the notification message will only be sent once within an hour Set the receiving period, the default is 00:00-23:59, that is, you can receive notification messages throughout the day  After the settings are complete, click the Save button to submit.\nReceive alert notification message #  Wait for a while, and receive the DingTalk alerting message notification as follows:\nYou can see that the alerting notification message shows the Elasticsearch cluster ID, index name, and delay size of which query delay is too high.\nView the alerting message center #  In addition to receiving external notification messages, the INFINI Console Alert Message Center also generates an alert message. Click menu Alerting \u0026gt; Alerting Center to enter\nSummary #  By using the INFINI Console alerting function, you can easily monitor the slow index of the Elasticsearch cluster. After configuring alerting rule, Once any Elasticsearch index query latency is too high, an alert will be triggered and an alert message will be sent.\n"});index.add({'id':33,'href':'/docs/tutorials/cluster_node_cpu_usage/','title':"How to monitor the CPU usage of Elasticsearch cluster nodes",'section':"Tutorials",'content':"How to monitor the CPU usage of Elasticsearch cluster nodes #  Introduction #  This article will introduce how to use the INFINI Console to monitor the disk usage of Elasticsearch cluster nodes and alert them.\nPrepare #   Download and install the latest version of INFINI Console Register Elasticsearch cluster using INFINI Console  Create alerting rule #  Open INFINI Console in the browser, click Alerting \u0026gt; Rules on the left menu to enter the alerting management page, and then click the New button to enter the alerting rule creation page. Follow these steps to create an alerting rule:\n Select the cluster (here you need to select the Elasticsearch cluster where the INFINI Console stores data, that is, the Elasticsearch cluster configured in the configuration file console.yml, if it is not registered to the INFINI Console, please register first) Input the alerting object .infini_metrics* (select the index under the Elasticsearch cluster, or enter the index pattern, because the monitoring data collected by the INFINI Console is stored in the index .infini_metrics) Input filter condition (Elasticsearch query DSL) Here we need to filter the monitoring metrics category to node_stats and the metadata category to elasticsearch. The DSL is as follows:  { \u0026quot;bool\u0026quot;: { \u0026quot;must\u0026quot;: [ { \u0026quot;term\u0026quot;: { \u0026quot;metadata.name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;node_stats\u0026quot; } } }, { \u0026quot;term\u0026quot;: { \u0026quot;metadata.category\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;elasticsearch\u0026quot; } } } ] } }  Select time field timestamp and statistical period for date histogram aggregation   Input the rule name Group settings (optional, multiple can be configured), set when statistical metrics need to be grouped, because all registered to INFINI Console The Elasticsearch cluster monitoring metrics are stored in the index .infini_metrics, so you need to group according to the cluster ID first, and then group according to the node ID, Here we choose metadata.labels.cluster_id and metadata.labels.node_id. Configure the alerting metrics, select the aggregation field payload.elasticsearch.node_stats.process.cpu.percent, and the statistics method avg. Configure the metrics formula (when more than one alerting metrics is configured, you need to set a formula to calculate the target metrics), where the formula fx is configured as a. Then set the value type of the variable a to the ratio Ratio. Configure the alerting conditions, configure three alerting conditions here, and configure the P2(Medium) alerting when the CPU usage is greater than 80 for continuous one cycle; Configure the continue for one cycle when the CPU usage is greater than 90, trigger the P1(High) alerting; Configure the continuous period to trigger the P0(Critical) alerting when the CPU usage is greater than 95; Set the execution period, here is configured to execute a check every minute Set the event title, the event title is a template, you can use template variables, template syntax and template variable usage reference here Set the event content, the event content is a template, you can use template variables, template syntax and template variable usage reference here  Priority:{{.priority}} Timestamp:{{.timestamp | datetime_in_zone \u0026quot;Asia/Shanghai\u0026quot;}} RuleID:{{.rule_id}} EventID:{{.event_id}} {{range.results}} ClusterID:{{index.group_values ​​0}}; NodeID:{{index.group_values ​​1}}; CPU:{{.result_value | to_fixed 2}}%; {{end}}  Turn on the configure alerting channel switch, and select add in the upper right corner to quickly select an alerting channel template to fill. For how to create an alerting channel template, please refer to here Set the silence period to 1 hour, that is, after the alerting rule is triggered, the notification message will only be sent once within an hour Set the receiving period, the default is 00:00-23:59, that is, you can receive notification messages throughout the day  After the settings are complete, click the Save button to submit.\nReceive alert notification message #  Wait for a while, and receive the DingTalk alerting message notification as follows:\nYou can see that the alert notification message displays the Elasticsearch cluster ID, node ID, and current CPU usage triggered by the current rule.\nView the alerting message center #  In addition to receiving external notification messages, the INFINI Console Alert Message Center also generates an alert message. Click menu Alerting \u0026gt; Alerting Center to enter\nSummary #  By using the INFINI Console alerting function, you can easily monitor the CPU usage of Elasticsearch cluster nodes. After configuring the alerting rule, once the CPU usage of any Elasticsearch node exceeds the set threshold, an alert will be triggered and an alert message will be sent.\n"});index.add({'id':34,'href':'/docs/tutorials/cluster_node_jvm_usage/','title':"How to monitor JVM usage of Elasticsearch cluster nodes",'section':"Tutorials",'content':"How to monitor JVM usage of Elasticsearch cluster nodes #  Introduction #  This article will introduce how to use the INFINI Console to monitor the JVM usage of Elasticsearch cluster nodes and generate alerts.\nPrepare #   Download and install the latest version of INFINI Console Register Elasticsearch cluster using INFINI Console  Create alerting rule #  Open INFINI Console in the browser, click on the left menu \u0026ldquo;Alerting\u0026rdquo; \u0026gt; Rules to enter the alerting management page, and then click New button to enter the Create Alerting Rule page. Follow these steps to create an alerting rule:\n Select the cluster (here you need to select the Elasticsearch cluster where the INFINI Console stores data, that is, the Elasticsearch cluster configured in the configuration file console.yml, if it is not registered to the INFINI Console, please register first) Input the alerting object .infini_metrics* (select the index under the Elasticsearch cluster, or enter the index pattern, because the monitoring data collected by the INFINI Console is stored in the index .infini_metrics) Input filter criteria (Elasticsearch query DSL) Here we need to filter the monitoring metrics category to node_stats and the metadata category to elasticsearch. The DSL is as follows:  { \u0026quot;bool\u0026quot;: { \u0026quot;must\u0026quot;: [ { \u0026quot;term\u0026quot;: { \u0026quot;metadata.name\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;node_stats\u0026quot; } } }, { \u0026quot;term\u0026quot;: { \u0026quot;metadata.category\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;elasticsearch\u0026quot; } } } ] } }  Select time field timestamp and statistical period for date histogram aggregation   Input the rule name Group settings (optional, multiple can be configured), set when statistical metrics need to be grouped, because all registered to INFINI Console The Elasticsearch cluster monitoring metrics are stored in the index .infini_metrics, so you need to group according to the cluster ID first, and then group according to the node ID, Here we choose metadata.labels.cluster_id and metadata.labels.node_id. Configure the alerting metrics, select the aggregation field payload.elasticsearch.node_stats.jvm.mem.heap_used_percent, and the statistics method p90. Configure the metrics formula (when more than one alerting metrics is configured, you need to set a formula to calculate the target metrics), where the formula fx is configured as a. Then set the value type of the variable a to the ratio Ratio. Configure the alerting conditions, configure three alerting conditions here, configure the P2(Medium) alerting when the JVM usage rate is greater than 50 for continuous one cycle; Configure continues one cycle when the JVM usage rate is greater than 90, trigger the P1(High) alerting; Configure the P0(Critical) alerting to be triggered when the JVM usage rate is greater than 95 for one cycle; Set the execution period, here is configured to execute a check every minute Set the event title, the event title is a template, you can use template variables, template syntax and template variable usage reference here Set the event content, the event content is a template, you can use template variables, template syntax and template variable usage reference here  Priority:{{.priority}} Timestamp:{{.timestamp | datetime_in_zone \u0026quot;Asia/Shanghai\u0026quot;}} RuleID:{{.rule_id}} EventID:{{.event_id}} {{range.results}} ClusterID:{{index.group_values ​​0}}; NodeID:{{index.group_values ​​1}}; JVM used percent: {{.result_value | to_fixed 2}}%; {{end}}  Turn on the configure alerting channel switch, and select add in the upper right corner to quickly select an alerting channel template to fill. For how to create an alerting channel template, please refer to here Set the silence period to 1 hour, that is, after the alerting rule is triggered, the notification message will only be sent once within an hour Set the receiving period, the default is 00:00-23:59, that is, you can receive notification messages throughout the day  After the settings are complete, click the Save button to submit.\nReceive alert notification message #  Wait for a while, and receive the DingTalk alerting message notification as follows:\nYou can see that the alert notification message displays the Elasticsearch cluster ID, node ID, and current JVM usage rate triggered by the current rule.\nView the alerting message center #  In addition to receiving external notification messages, the INFINI Console Alert Message Center also generates an alert message. Click menu Alerting \u0026gt; Alerting Center to enter\nSummary #  By using the INFINI Console alert function, you can easily monitor the JVM usage of Elasticsearch cluster nodes. After configuring alerting rule, Once any Elasticsearch node JVM usage exceeds a set threshold, an alert will be triggered and an alert message will be sent.\n"});index.add({'id':35,'href':'/docs/release-notes/','title':"Release Notes",'section':"Docs",'content':"Release Notes #  Information about release notes of INFINI Console is provided here.\n0.7.0 #  Breaking changes #  Features #   Added Data Migration。 Added Initialization Guide. Added System Service Health Monitoring。 Added License Authorization.  Bug fix #   Fixed the problem that Discover did not search for the first time.  0.6.0 #  Breaking changes #  Features #   Added Overview Hosts. Added Monitor Hosts. Added log viewing in node overview (agent installation required). Insight Config Modal add Search Config.  Bug fix #   Fixed the problem that page Discover became white screen when used field filter. Fixed the problem that sort failure after adding fields to page Discover\u0026rsquo;s table. Fixed the problem that the cluster registration was unsuccessful due to the incompatibility of js in low-level browsers. Fixed the incompatibility issue of Elasticsearch 8.x deleting documents. Fixed the issue of exception handling when creating a new index was unsuccessful. Fixed the issue with null pointer references in metadata configuration. Fixed the issue where loading common commands failed in the dev tools.  Improvements #   Local list search lookup supports wildcard filtering. Support configuration page title suffix. Optimized the display of required fields in alerting rules. Set Discover TimeRange Auto Fit to 15 minutes. Optimize Discover to save the search, the field filters and Insight widget configuration will be saved. Optimized cluster list: add link jump; Support cluster list status field sorting.  0.5.0 #  Breaking changes #  Features #   Added IO metrics at the elasticsearch node level (only supports the Linux version of Elasticsearch cluster). Added agent management. Add docker image based on Centos. Add INFINI Insight chart type (number, pie, area).  Bug fix #   Fixed an issue with duplicate requests after the Gateway instance list was refreshed. Fixed an issue where docker image timezone loading failed. Fixed the issue that the metrics queue does not consume when the Elasticsearch cluster of storing data is unavailable. Fixed the problem that the development tool cannot forward the request to the Https based cluster. Fixed INFINI Insight all chart fetch data again after edits one of them. Fixed query still has the old state when jumping from the index link of other pages to discover.  Improvements #   Optimized the log output when refresh cluster state. Optimized the pop-up prompt that frequently jumps to the login page when unauthorized. Optimize the time selection UI of the discover search bar, make the space more compact and switch more convenien  0.4.0 #  Breaking changes #  Features #   Discover adds an Insight module, which pushes charts according to the data characteristics under the index, and visualizes the metrics data. Discover adds the functions of saving searches and replaying searches. Add alias management.  Bug fix #   Fixed the bug that the Dev tools returned an error when sending a request response in v0.3.1 without security enabled. Fixed the bug that the AWS Elasticsearch cloud environment had no node http.public_address, which caused an error in collecting monitoring data. Fixed the bug that when the Elasticsearch cluster for storing data is unavailable, the collected metric data are not consumed(Updating the settings of elastic\u0026gt;store defaults to false in console.yml).  Improvements #   Optimized Console storage data Elasticsearch version check prompt.  0.3.1 #  Bug fix #   The kv module should be initialized before elastic module The account profile api should get builtin username dynamically Fixed an issue where the index in the overview was not displayed correctly Fixed node health status in the overview was not displayed correctly Fixed the bug that the new channel could not get the type when the rule was submit  0.3.0 #  Breaking changes #  Features #   Support basic authentication Added platform overview Added cluster activities Added index management Added data view management Added data discover (Support both index and view) Support gzip compression and it is enabled by default Support rbac authorization Added alerting management (Support webhook channel) Added time-zone quick selector  Bug fix #   Fixed bug: discover multi fields selected Fixed bug: the count of nodes and shards value incorrect in cluster overview Fixed bug: overview search request params field from do not counting from 0 Fixed bug: login page tab not centered Fixed bug: Re-login redirect jump parameter problem caused by session expiration Fixed bug: Overview Statistic component mask state value incorrect Fixed bug: repeat http request pending state Fixed bug: console copy as curl without an endpoint  Improvements #   Rewritten monitoring UI Optimize cluster metrics line chart Optimize health status component Add filter component to quick filter clisters,nodes,indices Add local sort for table column of clisters,nodes,indices Add isTLS form field for Gateway register Index list and node list Support real-time and non-real-time data switching viewing The interval for collecting elasticsearch cluster state is configurable Optimized requests to elasticsearch Add Console version info Add client http request timeout auto abort Dev tool support search Proper Handle metrics collecting while cluster in partial failure  0.2.0 #  Breaking changes #  Features #   Collect Elasticsearch cluster_health metrics Added thread pool related metrics Optimize the grouping of metrics Index .infini_metrics support ilm configuration Added hot key(Ctrl+Shift+O) to dev tools English version support  Bug fix #   Fixed the \u0026ldquo;required authentication credentials\u0026rdquo; issue in the test connection cluster time Fixed the problem that the validation failed when the cluster address is a domain name and contains special characters Fixed the issue that monitoring data is not displayed on 32-bit operating systems Fixed the problem that the Dev tools was initialized blank when the storage ES address changed Fixed the problem that the pagination of cluster list page cannot work  Improvements #   Cluster view Added metrics of counting cluster master, data, and coordinating nodes Cluster view Added metric of cluster health Node view Add JVM grouping, display related information of JVM memory Node view added JVM GC frequency and GC delay metrics Use POST instead of GET when request body is not nil Node view added cache hit rate and other related metrics Node View added metric of the number of open files Show the last time of the metrics was collected When the cluster is unavailable  0.1.0 #   Elasticsearch clusters management Basic monitoring supported for Elasticsearch cluster Dev tools support elasticsearch  "});index.add({'id':36,'href':'/docs/upgrade/','title':"Upgrade",'section':"Docs",'content':"Upgrade #  Here are instructions for the version upgrade of the INFINI Console.\nFrom 0.2 to 0.3 #  Update template .infini #  PUT _template/.infini { \u0026quot;order\u0026quot;: 0, \u0026quot;index_patterns\u0026quot;: [ \u0026quot;.infini_*\u0026quot; ], \u0026quot;settings\u0026quot;: { \u0026quot;index\u0026quot;: { \u0026quot;max_result_window\u0026quot;: \u0026quot;10000000\u0026quot;, \u0026quot;mapping\u0026quot;: { \u0026quot;total_fields\u0026quot;: { \u0026quot;limit\u0026quot;: \u0026quot;20000\u0026quot; } }, \u0026quot;analysis\u0026quot;: { \u0026quot;analyzer\u0026quot;: { \u0026quot;suggest_text_search\u0026quot;: { \u0026quot;filter\u0026quot;: [ \u0026quot;word_delimiter\u0026quot; ], \u0026quot;tokenizer\u0026quot;: \u0026quot;classic\u0026quot; } } }, \u0026quot;number_of_shards\u0026quot;: \u0026quot;1\u0026quot; } }, \u0026quot;mappings\u0026quot;: { \u0026quot;dynamic_templates\u0026quot;: [ { \u0026quot;strings\u0026quot;: { \u0026quot;mapping\u0026quot;: { \u0026quot;ignore_above\u0026quot;: 256, \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot;: \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot;: {} } Close index .infini_cluster #  POST .infini_cluster/_close Update index settings of .infini_cluster #  PUT .infini_cluster/_settings { \u0026quot;analysis\u0026quot;: { \u0026quot;analyzer\u0026quot;: { \u0026quot;suggest_text_search\u0026quot;: { \u0026quot;filter\u0026quot;: [ \u0026quot;word_delimiter\u0026quot; ], \u0026quot;tokenizer\u0026quot;: \u0026quot;classic\u0026quot; } } } } Update index mappings of .infini_cluster #  PUT .infini_cluster/_mapping { \u0026quot;dynamic_templates\u0026quot;: [ { \u0026quot;strings\u0026quot;: { \u0026quot;match_mapping_type\u0026quot;: \u0026quot;string\u0026quot;, \u0026quot;mapping\u0026quot;: { \u0026quot;ignore_above\u0026quot;: 256, \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; } } } ], \u0026quot;properties\u0026quot;: { \u0026quot;basic_auth\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;password\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;username\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; } } }, \u0026quot;created\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;date\u0026quot; }, \u0026quot;description\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;text\u0026quot; }, \u0026quot;discovery\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;refresh\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;object\u0026quot; } } }, \u0026quot;enabled\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;boolean\u0026quot; }, \u0026quot;endpoint\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;endpoints\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;host\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;hosts\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;labels\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;health_status\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot;: 256 } } }, \u0026quot;location\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;dc\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;provider\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;rack\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;region\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; } } }, \u0026quot;monitored\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;boolean\u0026quot; }, \u0026quot;name\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;fields\u0026quot;: { \u0026quot;text\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;text\u0026quot; } } }, \u0026quot;order\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;integer\u0026quot; }, \u0026quot;owner\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;department\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;id\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;name\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] } } }, \u0026quot;project\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;schema\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;search_text\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;text\u0026quot;, \u0026quot;analyzer\u0026quot;: \u0026quot;suggest_text_search\u0026quot;, \u0026quot;index_prefixes\u0026quot;: { \u0026quot;min_chars\u0026quot;: 2, \u0026quot;max_chars\u0026quot;: 5 }, \u0026quot;index_phrases\u0026quot;: true }, \u0026quot;tags\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;traffic_control\u0026quot;: { \u0026quot;properties\u0026quot;: { \u0026quot;max_bytes_per_node\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;max_connection_per_node\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;max_qps_per_node\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; }, \u0026quot;max_wait_time_in_ms\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot; } } }, \u0026quot;updated\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;date\u0026quot; }, \u0026quot;version\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot;: [ \u0026quot;search_text\u0026quot; ] } } } Open index .infini_cluster #  POST .infini_cluster/_open Update console.yml #  The v0.3 version adds a pipeline configuration to the v0.2 version：\n- name: metadata_ingest auto_start: true keep_running: true processor: - metadata: bulk_size_in_mb: 10 bulk_max_docs_count: 5000 fetch_max_messages: 1000 elasticsearch: \u0026quot;default\u0026quot; queues: type: metadata category: elasticsearch when: cluster_available: [ \u0026quot;default\u0026quot; ] - name: activity_ingest auto_start: true keep_running: true processor: - activity: bulk_size_in_mb: 10 bulk_max_docs_count: 5000 fetch_max_messages: 1000 elasticsearch: \u0026quot;default\u0026quot; queues: category: elasticsearch activity: true consumer: group: activity when: cluster_available: [ \u0026quot;default\u0026quot; ]  stop console add the above configuration under the pipeline module in the console.yml configuration file start console  Configure ILM for index .infini_alert-history #  The alert module has been added in v0.3. The alert module stores a large amount of index data for execution records, so you need to configure ILM as follows:\nPUT _template/.infini_alert-history-rollover { \u0026quot;order\u0026quot; : 100000, \u0026quot;index_patterns\u0026quot; : [ \u0026quot;.infini_alert-history*\u0026quot; ], \u0026quot;settings\u0026quot; : { \u0026quot;index\u0026quot; : { \u0026quot;format\u0026quot; : \u0026quot;7\u0026quot;, \u0026quot;lifecycle\u0026quot; : { \u0026quot;name\u0026quot; : \u0026quot;infini_metrics-30days-retention\u0026quot;, \u0026quot;rollover_alias\u0026quot; : \u0026quot;.infini_alert-history\u0026quot; }, \u0026quot;codec\u0026quot; : \u0026quot;best_compression\u0026quot;, \u0026quot;number_of_shards\u0026quot; : \u0026quot;1\u0026quot;, \u0026quot;translog.durability\u0026quot;:\u0026quot;async\u0026quot; } }, \u0026quot;mappings\u0026quot; : { \u0026quot;dynamic_templates\u0026quot; : [ { \u0026quot;strings\u0026quot; : { \u0026quot;mapping\u0026quot; : { \u0026quot;ignore_above\u0026quot; : 256, \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;match_mapping_type\u0026quot; : \u0026quot;string\u0026quot; } } ] }, \u0026quot;aliases\u0026quot; : { } } DELETE .infini_alert-history DELETE .infini_alert-history-00001 PUT .infini_alert-history-00001 { \u0026quot;settings\u0026quot;: { \u0026quot;index.lifecycle.rollover_alias\u0026quot;:\u0026quot;.infini_alert-history\u0026quot; , \u0026quot;refresh_interval\u0026quot;: \u0026quot;5s\u0026quot; }, \u0026quot;aliases\u0026quot;:{ \u0026quot;.infini_alert-history\u0026quot;:{ \u0026quot;is_write_index\u0026quot;:true } }, \u0026quot;mappings\u0026quot;: { \u0026quot;properties\u0026quot; : { \u0026quot;condition\u0026quot; : { \u0026quot;properties\u0026quot; : { \u0026quot;items\u0026quot; : { \u0026quot;properties\u0026quot; : { \u0026quot;expression\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;minimum_period_match\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;long\u0026quot; }, \u0026quot;operator\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;severity\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;values\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 } } }, \u0026quot;operator\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 } } }, \u0026quot;condition_result\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;object\u0026quot;, \u0026quot;enabled\u0026quot; : false }, \u0026quot;context\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;created\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;date\u0026quot; }, \u0026quot;expression\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;is_escalated\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;boolean\u0026quot; }, \u0026quot;is_notified\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;boolean\u0026quot; }, \u0026quot;message\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;objects\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;copy_to\u0026quot; : [ \u0026quot;search_text\u0026quot; ] }, \u0026quot;resource_id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;resource_name\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;rule_id\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;rule_name\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;search_text\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;text\u0026quot;, \u0026quot;analyzer\u0026quot; : \u0026quot;suggest_text_search\u0026quot;, \u0026quot;index_prefixes\u0026quot; : { \u0026quot;min_chars\u0026quot; : 2, \u0026quot;max_chars\u0026quot; : 5 }, \u0026quot;index_phrases\u0026quot; : true }, \u0026quot;severity\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;state\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot;, \u0026quot;ignore_above\u0026quot; : 256 }, \u0026quot;title\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;keyword\u0026quot; }, \u0026quot;updated\u0026quot; : { \u0026quot;type\u0026quot; : \u0026quot;date\u0026quot; } } } } Upgrade FAQs #  Fault Description: #  Duplicate index data\nSolution: #   stop console delete index .infini_index start console  Fault Description: #  Duplicate node data\nSolution: #   stop console delete index .infini_node start console  Fault Description: #  The data node has monitoring data, Non-data nodes (master, client, etc.) have no monitoring data, as shown in the following figure：\nSolution: #  Please upgrade the INFINI Console to the latest version.\nFault Description: #  The page appears blank and JS reports an error.\nSolution: #  Please upgrade the INFINI Console to the latest version. Also provide the specific error information to us.\nFeedback #  If you have any other questions or suggestions, please submit them to us through the feedback on the right or here, to help us improving the products, thank you for your support!\n"});index.add({'id':37,'href':'/docs/reference/alerting/variables/','title':"Template variables",'section':"Alerting",'content':"Template variables #  Introduction #  When custom alerting triggers event content, in addition to the fixed copy written by yourself, the event title and event content also support template syntax. The rendering of the text can be achieved using fields in the event.\nVariables #  The syntax for rendering fields is {{ .fieldname }}, and the variable fields that can be used for template content rendering are as follows:\n   Field Name Type Descriction eg     rule_id string rule uuid c9f663tath2e5a0vksjg   rule_name string rule name High CPU usage   resource_id string resource uuid c9f663tath2e5a0vksjg   resource_name string resource name es-v716   event_id string identifier for check details c9f663tath2e5a0vksjx   timestamp number Millisecond timestamp 1654595042399   first_group_value string The first value of group_values in results c9aikmhpdamkiurn1vq0   first_threshold string The first value of threshold in results 90   priority string The highest priority in results critical   title string event title Node ({{.first_group_value}}) disk used \u0026gt;= 90%   message string event content EventID：{{.event_id}}; Cluster：{{.resource_name}}   results array result of groups    ┗ threshold array  [\u0026ldquo;90\u0026rdquo;]   ┗ priority string  high   ┗ group_values array  [\u0026ldquo;cluster-xxx\u0026rdquo;, \u0026ldquo;node-xxx\u0026rdquo;]   ┗ issue_timestamp number Millisecond timestamp 1654595042399   ┗ result_value float  91.2   ┗ relation_values map  {a:100, b:91.2}    Variable usage example #  Example 1:\n{\u0026quot;content\u0026quot;:\u0026quot;【Alerting】Event ID: {{.event_id}}, Cluster：{{.resource_name}}\u0026quot;} Example 2(array traversal):\n{{range .results}} Cluster ID: {{index .group_values 0}} {{end}} Template functions #  In addition to directly displaying the field value in the alerting event, it also supports the use of template functions to further process the field value to optimize the output.\nFunctions support extra parameters. When no parameters are required or passed, the following syntax can be used directly:\n{{ \u0026lt;field\u0026gt; | \u0026lt;function\u0026gt; }}\nSpecific examples are as follows:\nFunctions take no parameters:\nAlerting event trigger time:{{ .timestamp | datetime }} Functions take parameters:\nAlerting event trigger time:{{ .timestamp | datetime_in_zone \u0026quot;Asia/Shanghai\u0026quot; }} Use multiple functions in combination:\n{{.result_value | format_bytes 2 ｜ to_upper}} The complete list of template functions is as follows:\n   Functions params Descriction     to_fixed fixed number of decimal places The float type value retains N decimal places\nExample:{{.result_value | to_fixed 2}}\nOutput:10.35   format_bytes fixed number of decimal places Byte type numeric formatting\nExample:{{.result_value | format_bytes 2}}\nOutput:10.35gb   date  Convert timestamp to UTC date\nExample:{{.timestamp | date}}\nOutput:2022-05-01   date_in_zone Time zone Convert timestamp to current zone date\nExample:{{.timestamp | date_in_zone \u0026quot;Asia/Shanghai\u0026quot;}}\nOutput:2022-05-01   datetime  Convert timestamp to UTC time\nExample:{{.timestamp | datetime}}\nOutput:2022-05-01 10:10:10   datetime_in_zone Time zone Convert timestamp to current zone time\nExample:{{.timestamp | datetime_in_zone \u0026quot;Asia/Shanghai\u0026quot;}}\nOutput:2022-05-01 10:10:10   to_lower  Convert characters to lowercase\nExample:{{.resource_name | to_lower }}\nOutput:cluster   to_upper  Convert characters to uppercase\nExample:{{.resource_name | to_upper }}\nOutput:CLUSTER   add number Example: a+b\n{{.result_value | add 1 }}\nOutput：2   sub number Example: a - b\n{{sub .result_value 1 }}\nOutput：0   mul number Example: a * b * c\n{{mul .result_value 3 2 }}\nOutput：6   div number Example: a/b\n{{div .result_value 2 }}\nOutput：0.5    Common Template Syntax #  Array traversal：\n{{range .results}} priority: {{.priority}} {{end}} Get values by array subscript:\nExample: group_values = [\u0026ldquo;value1\u0026rdquo;,\u0026ldquo;value2\u0026rdquo;,\u0026ldquo;value3\u0026rdquo;]\n{{index .group_values 0}} # output: value1 {{index .group_values 2}} # output: value3 if conditional branch：\n{{if pipeline}} T1 {{else}} T0 {{end}} Example:\n{{if eq .priority \u0026quot;critical\u0026quot;}} \u0026quot;#C91010\u0026quot; {{else if eq .priority \u0026quot;high\u0026quot;}} \u0026quot;#EB4C21\u0026quot; {{else}} \u0026quot;#FFB449\u0026quot; {{end}} There is also a set of binary comparison operators defined as functions:\neq Returns the boolean truth of arg1 == arg2 ne Returns the boolean truth of arg1 != arg2 lt Returns the boolean truth of arg1 \u0026lt; arg2 le Returns the boolean truth of arg1 \u0026lt;= arg2 gt Returns the boolean truth of arg1 \u0026gt; arg2 ge Returns the boolean truth of arg1 \u0026gt;= arg2   A more complete example for Slack message ...  { \u0026quot;blocks\u0026quot;: [ { \u0026quot;type\u0026quot;: \u0026quot;section\u0026quot;, \u0026quot;text\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;【test201】Alerting:\\n\u0026lt;http://localhost:8000/#/alerting/alert/{{.event_id}}|{{.title}}\u0026gt; \u0026lt;@username\u0026gt;\u0026quot; } }, { \u0026quot;type\u0026quot;: \u0026quot;section\u0026quot;, \u0026quot;text\u0026quot;: { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Timestamp:* {{.issue_timestamp | datetime}}\u0026quot; } } ], \u0026quot;attachments\u0026quot;: [ {{range .results}} { \u0026quot;color\u0026quot;: {{if eq .priority \u0026quot;critical\u0026quot;}} \u0026quot;#C91010\u0026quot; {{else if eq .priority \u0026quot;high\u0026quot;}} \u0026quot;#EB4C21\u0026quot; {{else}} \u0026quot;#FFB449\u0026quot; {{end}}, \u0026quot;blocks\u0026quot;: [ { \u0026quot;type\u0026quot;: \u0026quot;section\u0026quot;, \u0026quot;fields\u0026quot;: [ { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Cluster:* {{index .group_values 0}}\u0026quot; }, { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Node:* {{index .group_values 1}}\u0026quot; }, { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Threshold:* {{index .threshold 0}}\u0026quot; }, { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Priority:* {{.priority}}\u0026quot; }, { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Monitoring value:* {{.result_value}}\u0026quot; }, { \u0026quot;type\u0026quot;: \u0026quot;mrkdwn\u0026quot;, \u0026quot;text\u0026quot;: \u0026quot;*Disk usage:* {{.relation_values.a | format_bytes 2 | to_upper}}\u0026quot; } ] } ] }, {{end}} ] } More template syntaxClick me\n   "});index.add({'id':38,'href':'/docs/resources/','title':"Other Resources",'section':"Docs",'content':"Other Resources #  Useful external resources related to INFINI Console are provided here.\nArticles #  Videos #  "});})();