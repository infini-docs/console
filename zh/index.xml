<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>INFINI Console</title><link>/zh/</link><description>Recent content on INFINI Console</description><generator>Hugo -- gohugo.io</generator><atom:link href="/zh/index.xml" rel="self" type="application/rss+xml"/><item><title>平台概览</title><link>/zh/docs/reference/platform/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/platform/overview/</guid><description>平台概览 # 简介 # 在平台概览里，可以查看集群、节点、索引、主机层面的主要指标，了解各层面的运行状态。
集群 # 节点 # 索引 # 主机 # 主机数据来源于 INFINI Agent 数据上报和 Elasticsearch 节点发现。
发现主机 # 点击主机列表右侧的按钮&amp;quot;Discover host&amp;quot;，勾选后，点击按钮&amp;quot;add hosts&amp;quot;即可添加主机到主机列表。</description></item><item><title>下载安装</title><link>/zh/docs/getting-started/install/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/getting-started/install/</guid><description>安装 INFINI Console # INFINI Console 支持主流的操作系统和平台，程序包很小，没有任何额外的外部依赖，安装起来应该是很快的 ：）
安装前准备 # 准备一个可以存储数据的 Elasticsearch 集群，要求为 7.3 及以上版本，用于 INFINI Console 存储相关数据。
下载安装 # 根据您所在的操作系统和平台选择下面相应的下载地址：
https://release.infinilabs.com/console/
容器部署 # INFINI Console 也支持 Docker 容器方式部署。
了解更多 配置 # 下载 INFINI Console 安装包解压之后，打开console.yml配置文件，我们可以看到 以下配置节：
#存储 INFINI Console 相关数据的 Elasticsearch 集群信息，版本 v7.3+ elasticsearch: - name: default enabled: true monitored: true endpoint: http://192.168.3.188:9299 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB 一般情况下，我们只需要修改配置里面的 endpoint 配置，若 Elasticsearch 开启了安全验证，则需要修改 username 和 password 配置。</description></item><item><title>功能介绍</title><link>/zh/docs/reference/agent/manage/manage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/agent/manage/manage/</guid><description>功能介绍 # 简介 # 探针管理包括审核探针(INFINI Agent)、查看运行状态、分配任务等功能，是集中管理探针(INFINI Agent)的地方。 去安装探针
审核探针 # 进入菜单探针管理 &amp;gt; 实例管理 点击按钮 Discover Agent。 可以看到待审核列表。选中对应 Agent 并点击 Add Agents 完成审核。 删除探针 # 进入菜单探针管理 &amp;gt; 实例管理，在列表中点击对应列的删除，确认之后，探针即被删除。 任务设置 # 任务设置，是指下发/取消采集数据的任务给探针。探针在收到任务前，会一直处于等待状态。进入菜单探针管理 &amp;gt; 实例管理，在对应Agent列，点击Task Setting，配置任务然后点击保存。</description></item><item><title>集群监控</title><link>/zh/docs/reference/platform/monitoring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/platform/monitoring/</guid><description>集群监控 # 简介 # 当注册的集群开启了监控之后，INFINI Console 会根据相应配置去目标集群定期采集数据， 包括集群、节点、索引层面的一些指标。然后在集群监控里面可以观测到这些指标，从而了解目标集群的运行状态。
监控所需 Elasticsearch API 权限清单 # _cluster/health，_cluster/stats，_cat/shards, /_nodes/&amp;lt;node_id&amp;gt;/stats _cat/indices, _stats, _cluster/state, _nodes, _alias, _cluster/settings
开启集群监控 # 在集群注册或者修改集群配置的时候，可以看到如下界面
可以看到有一个 Monitored 的开关，当这个开关打开时，代表当前集群是开启监控的。 集群注册的时候，默认是开启监控的。监控配置里面包括集群健康指标、集群指标、节点指标和索引指标， 并且可以分别设置是否开启和采集时间间隔。
以上是对单个集群的设置，在配置文件console.yaml中可以设置对所有集群的监控启停，默认情况下可以看到配置文件中有如下配置：
metrics: enabled: true major_ip_pattern: &amp;quot;192.*&amp;quot; queue: metrics elasticsearch: enabled: true cluster_stats: true node_stats: true index_stats: true 如果 metrics&amp;gt;enable 设置为 false, 那么所有的集群监控都是没有开启的； 如果 metrics&amp;gt;elasticsearch&amp;gt;cluster_stats&amp;gt;enabled 设置为 false，那么所有的 集群就不会采集集群层面的相关指标。
查看集群指标监控 # 开启监控之后，在 INFINI Console 左侧菜单平台管理下面的监控报表里可以查看集群的监控信息，如下：
点击高级 tab 页查看集群层面更多的指标；</description></item><item><title>用户管理</title><link>/zh/docs/reference/system/security/user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/system/security/user/</guid><description>用户管理 # 简介 # 用户管理包括对用户的增删改查操作以及重置用户密码.
创建用户 # 用户名是必填的并且需要唯一，作为登录账号名. 昵称, 手机号, 邮箱都是可选的. 给用户分配一个或者多个角色. 用户标签是可选的，可用于给用户分组. 查询用户 # 输入关键字，点击搜索按钮查询用户
更新用户 # 按需修改，点击保存按钮保存
重置用户密码 # 输入新密码点击保存按钮重置密码</description></item><item><title>下载安装</title><link>/zh/docs/reference/agent/install/install/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/agent/install/install/</guid><description>安装探针(INFINI Agent) # 探针(INFINI Agent) 是 INFINI Console 的子模块，负责数据抓取和 Elasticsearch 实例管理等任务，接受 Console 权限控制和统一的任务调度。 支持主流的操作系统和平台，程序包很小，没有任何额外的外部依赖。 安装前准备 # 安装并运行 INFINI Console
下载安装 # 根据您所在的操作系统和平台选择下面相应的下载地址：
https://release.infinilabs.com/agent/
容器部署 # 探针(INFINI Agent) 也支持 Docker 容器方式部署。
了解更多 配置 # 下载 探针(INFINI Agent) 安装包解压之后，打开agent.yml配置文件，我们可以看到以下配置：
#存储 INFINI Agent 相关数据的 Elasticsearch 集群信息，版本 v7.3+ #此处的 endpoint 需和 INFINI Console 的一致 elasticsearch: - name: default enabled: true monitored: false endpoint: http://192.168.3.4:9200 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB .</description></item><item><title>容器部署</title><link>/zh/docs/reference/agent/install/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/agent/install/docker/</guid><description>容器部署 # 探针(INFINI Agent) 支持容器方式部署。
下载镜像 # 探针(INFINI Agent) 的镜像发布在 Docker 的官方仓库，地址如下：
https://hub.docker.com/r/infinilabs/agent
使用下面的命令即可获取最新的容器镜像：
docker pull infinilabs/agent:latest 验证镜像 # 将镜像下载到本地之后，可以看到 探针(INFINI Agent) 的容器镜像非常小，只有不到 20MB，所以下载是非常快的。
✗ docker images REPOSITORY TAG IMAGE ID CREATED SIZE infinilabs/agent latest c7bd9ad063d9 4 days ago 13.8MB 创建配置 # 现在需要创建一个配置文件 agent.yml，来进行基本的配置，如下：
api: enabled: true network: binding: 0.0.0.0:8080 metrics: enabled: true queue: metrics network: enabled: true summary: true details: true memory: metrics: - swap - memory disk: metrics: - ioqs - usage cpu: metrics: - idle - system - user - iowait - load elasticsearch: enabled: true agent_mode: true node_stats: true index_stats: true cluster_stats: true elasticsearch: - name: default enabled: true endpoint: http://192.</description></item><item><title>告警中心</title><link>/zh/docs/reference/alerting/message/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/alerting/message/</guid><description>告警中心 # 简介 # 消息中心默认展示的是当前系统内正在发生的告警事件，方便管理人员快速预览系统的执行状态。
事件消息列表 # 消息列表聚合了所有已触发的告警事件，如每个告警规则重复触发了多次告警消息，这里只会聚合显示一条，点击详情就可以去看更多的信息。
消息详情 # 点击消息列表行列中的详情按钮可以查看当前告警事件消息的详细内容，包含事件消息的基本信息，事件触发周期内的时序曲线图，规则执行检测历史记录等，如下图所示：
忽略告警消息 # 如认为告警事件不需要做处理或者不重要，可以进行忽略操作，忽略后告警消息将不默认展在消息列表中，不过可以通过状态筛选过滤进行查询。
操作步骤：点击消息列表表格中的忽略按钮，进行二次确认，填写忽略原因，提交后执行忽略操作。</description></item><item><title>告警规则</title><link>/zh/docs/reference/alerting/rule/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/alerting/rule/</guid><description>告警规则 # 简介 # 告警规则包括数据源，指标定义，触发条件，消息通知四个部分的配置
告警规则列表 # 在告警规则列表中可以查询已经添加的告警规则
新建告警规则 # 在告警规则列表中点击新建按钮进入新建告警规则页面
配置数据源 # 选择集群（必选） 选择索引，支持输入索引 pattern （必填） 输入 elasticsearch query DSL 查询过滤条件（可选） 选择时间字段（必选） 选择统计周期（用于时间字段聚合，默认一分钟） 配置告警指标以及触发条件 # 输入规则名称 按需添加分组的字段以及分组大小，可以添加多个，用于 terms 聚合 选择指标聚合字段以及统计类型，可以配置多个，当配置多个时必须配置公式用于计算最终的指标 配置告警触发条件 选择执行检查周期 输入告警事件标题（模版，被模版变量中的 title 引用，点击这里了解 模版语法 ） 输入告警事件消息（模版，被模版变量中的 message 引用，点击这里了解 模版语法 ） 配置消息通知 # 配置通知渠道，可以重新配置，也可以通过添加按钮选择已经创建好的渠道作为模版快速填充，并支持添加多个 按需选择是否开启通知升级 选择沉默周期（通知消息发送频率） 配置通知发送时间段 点击保存按钮提交 更新告警规则 # 在告警规则列表中选择需要更新的告警规则点击编辑按钮进入更新告警规则页
删除告警规则 # 点击告警规则列表表格中的删除按钮，进行二次确认，确认删除后执行删除操作。</description></item><item><title>如何指定内置账户名和密码启动 INFINI Console</title><link>/zh/docs/tutorials/start_with_specify_user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/start_with_specify_user/</guid><description>如何指定内置账户名和密码启动 INFINI Console # 准备 # 下载并安装最新版 INFINI Console 开启 INFINI Console 安全功能 INFINI Console 内置账户 # INFINI Console 在开启安全的情况下，内置了一个管理员账户。 在不指定账户名和密码的情况下，INFINI Console 默认情况下内置账户的用户名和密码都是 admin。
指定账户名和密码启动 INFINI Console # INFINI Console 支持使用环境变量的方式指定账户名和密码启动，下面以 Macos 操作系统为例：
BOOTSTRAP_USERNAME=admin BOOTSTRAP_PASSWORD=123456 ./console-mac-amd64
禁用内置账户 # 由于使用内置账户，可能存在安全隐患，例如密码设置太简单等。因此当我们使用内置账户 登录 INFINI Console 创建新的管理员账号之后，可以使用新管理员账号登录，然后在 系统管理&amp;gt;安全设置 里面禁用内置账户。禁用之后就无法使用内置账户登录 INFINI Console了。
创建管理员账户 # INFINI Console 内置了一个管理员角色 Administrator，创建新用户的时候赋予这个角色，新用户就拥有管理员权限了。
点击 INFINI Console 左侧菜单 系统管理》安全设置，选择用户 Tab 页进入账户管理页。然后点击新建按钮，进入创建用户页面
输入用户名 root 角色选择 Administrator 点击保存按钮提交 将保存成功后的初始密码保存下来备用 使用新建的管理员禁用内置用户 # 使用上一步创建好的 root 用户和密码登录 INFINI Console, 然后在 系统管理&amp;gt;安全设置 里面打开禁用内置账户开关，看到如下界面时表示操作成功。</description></item><item><title>索引管理</title><link>/zh/docs/reference/data/indices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/data/indices/</guid><description>索引管理 # 索引列表 # 索引列表包括对索引的增删改查操作。
新建索引 # 输入新索引名称及索引设置即可完成添加。
索引详情 # 可以查看索引健康状态、分片数、文档数、存储大小等详情，以及Mappings、Edit settings的查看和修改。</description></item><item><title>索引设置</title><link>/zh/docs/getting-started/ilm/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/getting-started/ilm/</guid><description>索引设置 # INFINI Console 的所有监控指标都保存在 Elasticsearch 索引里面，随着时间的推移数据会越来越多，我们可以配置索引的生命周期来适配我们的监控存储需求。
配置默认索引模板 # 然后就可以配置 Elasticsearch 集群的索引模板了，在 系统监控 集群上执行下面的命令创建索引的模板。
展开查看 Elasticsearch 的模板定义 ... PUT _template/.infini { &amp;quot;order&amp;quot;: 0, &amp;quot;index_patterns&amp;quot;: [ &amp;quot;.infini_*&amp;quot; ], &amp;quot;settings&amp;quot;: { &amp;quot;index&amp;quot;: { &amp;quot;max_result_window&amp;quot;: &amp;quot;10000000&amp;quot;, &amp;quot;mapping&amp;quot;: { &amp;quot;total_fields&amp;quot;: { &amp;quot;limit&amp;quot;: &amp;quot;20000&amp;quot; } }, &amp;quot;analysis&amp;quot;: { &amp;quot;analyzer&amp;quot;: { &amp;quot;suggest_text_search&amp;quot;: { &amp;quot;filter&amp;quot;: [ &amp;quot;word_delimiter&amp;quot; ], &amp;quot;tokenizer&amp;quot;: &amp;quot;classic&amp;quot; } } }, &amp;quot;number_of_shards&amp;quot;: &amp;quot;1&amp;quot; } }, &amp;quot;mappings&amp;quot;: { &amp;quot;dynamic_templates&amp;quot;: [ { &amp;quot;strings&amp;quot;: { &amp;quot;mapping&amp;quot;: { &amp;quot;ignore_above&amp;quot;: 256, &amp;quot;type&amp;quot;: &amp;quot;keyword&amp;quot; }, &amp;quot;match_mapping_type&amp;quot;: &amp;quot;string&amp;quot; } } ] }, &amp;quot;aliases&amp;quot;: {} } 给索引 .</description></item><item><title>别名管理</title><link>/zh/docs/reference/data/alias/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/data/alias/</guid><description>别名管理 # 别名列表 # 别名列表包括对别名的增删改查操作。
新建别名 # 别名：输入别名名称 索引：选择别名对应的目标索引，支持使用 (*) 来绑定多个索引。 是否为写索引：指定选择的索引是否可写，如果别名只绑定一个索引，则默认该索引可写；如果是通过(*) 绑定多个索引，最需要指定其中一个索引为可写。 别名与索引关系列表 # 点开别名列表行首的+号按钮，会展开显示该别名对应绑定的索引列表，同时可以对索引进行关系绑定更新设置和删除。</description></item><item><title>告警渠道</title><link>/zh/docs/reference/alerting/channel/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/alerting/channel/</guid><description>告警渠道 # 简介 # 告警渠道用于当告警规则触发之后，发送通知消息的通道配置，目前支持 webhook。
渠道列表 # 在渠道列表中可以查询已经添加的渠道
新建告警渠道 # 在渠道列表页面中点击新建按钮进入新建告警渠道页面
输入渠道名称（必填） 选择渠道类型（当前仅支持 webhook ） 输入 webhook 地址 选择 HTTP 请求的方法，默认 POST 按需添加 HTTP 请求头 配置 webhook 请求体 点击保存按钮提交 更新渠道配置 # 在渠道列表中选择需要更新的渠道点击编辑按钮进入更新渠道配置页
操作参考新建告警渠道
删除告警渠道 # 点击告警渠道列表表格中的删除按钮，进行二次确认，确认删除后执行删除操作。</description></item><item><title>如何轻松创建一个 Elasticsearch “游客” 用户</title><link>/zh/docs/tutorials/create_readonly_account/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/create_readonly_account/</guid><description>如何轻松创建一个 Elasticsearch “游客” 用户 # 简介 # 有些情况下，我们想给客户分享一下某些功能或者数据，但是又不希望数据被修改。 这个时候我们就需要创建一个“游客” 用户了。本文简单地介绍了如何使用 INFINI Console 创建&amp;quot;游客&amp;quot;用户。
准备 # 下载并安装最新版 INFINI Console 开启 INFINI Console 安全功能 创建角色 # 点击 INFINI Console 左侧菜单 系统管理》安全设置，选择角色 Tab 页进入角色管理页。
新建平台角色 readonly # 点击新建按钮，选择平台角色，新建一个平台角色 readonly，操作步骤如下：
输入角色名称 readonly 展开所有的功能权限 除了系统设置下面的安全功能，其他所有的功能都选择 Read 权限。 系统设置下面的安全功能 设置为 None 权限。 点击保存按钮提交 选择某个功能的 All 权限代表拥有这个功能的读和写的操作权限， Read 代表只拥有读的权限， None 代表没有该功能权限（用户登录之后菜单中没有该功能）
新建数据角色 es-v7171 # 点击新建按钮，选择数据角色，新建一个数据角色 es-v7171，操作步骤如下：</description></item><item><title>数据迁移</title><link>/zh/docs/reference/migration/migration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/migration/migration/</guid><description>数据迁移 # 创建迁移任务 # 点击 INFINI Console 中左侧菜单 容灾备份》数据迁移，然后点击新建按钮创建迁移任务，如下图所示：
配置迁移集群 # 在源集群列表中选择集群 es-v5616, 在目标集群列表中选择集群 es-v7140
配置迁移索引 # 点击选择迁移索引按钮, 如下图：
这里我们选择了两个索引 test-10 和 test-15 ,然后点击确认
选择索引的时候请确认目标集群相应索引是否创建好 mapping, setting 等元数据信息
表格右方可以设置目标索引名称和文档 type，按需修改即可，这里我们将索引 test-10 重命名为 test-10-x, 将索引 test-15 重命名为 test-15-x，文档类型都重命名为 _doc。 选择完索引之后，点击下一步，进行迁移任务的数据范围设置和分区设置，如下图：
配置数据范围 # 如果需要过滤数据迁移，可以进行数据范围的设置，这里我们进行全量的数据迁移，就不设置了
配置数据分区 # 如果一个索引数据量特别大，可以进行数据分区的设置。数据分区根据设置的字段，以及分区步长将数据拆成多段，系统最终会将一个分段的数据作为一个子任务去运行，迁移数据， 这样的话即使，一个分段迁移过程出现异常，只需要重跑这个子任务。
数据分区设置目前支持按照日期类型字段（date）, 和数字类型 (number) 拆分分区，如上图所示，我们选择日期类型字段 now_widh_format 进行拆分分区，分区步长设置为 5分钟(5m), 然后点击预览按钮，可以看到根据设置拆分可以得到 8 个分区（文档数为0的分区最终不会生成子任务）。 根据预览信息确认分区设置无误之后，点击保存关闭分区设置并保存，然后点击下一步进行运行设置。
运行设置 # 一般情况下使用默认设置，然后执行节点选择网关实例 Dynamo，然后点击创建任务。</description></item><item><title>如何给不同 INFINI Console 账户分配不同 Elasticsearch 集群访问权限</title><link>/zh/docs/tutorials/role_with_different_rights/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/role_with_different_rights/</guid><description>如何给不同 INFINI Console 账户分配不同 Elasticsearch 集群访问权限 # 简介 # 本文将介绍使用 INFINI Console 给两个不同账户分配两个不同的 Elasticsearch 集群管理权限
准备 # 下载并安装最新版 INFINI Console 开启 INFINI Console 安全功能 注册至少两个 Elasticsearch 集群到 INFINI Console 创建角色 # 点击 INFINI Console 左侧菜单 系统管理》安全设置，选择角色 Tab 页进入角色管理页。
新建平台角色 platform_role # 点击新建按钮，选择平台角色，新建一个平台角色 platform_role，操作步骤如下：
输入角色名称 platform_role 展开所有的功能权限 除了系统设置下面的安全功能，其他所有的功能都选择 All 权限。 系统设置下面的安全功能 设置为 None 权限。 点击保存按钮提交 选择某个功能的 All 权限代表拥有这个功能的读和写的操作权限， Read 代表只拥有读的权限， None 代表没有该功能权限（用户登录之后菜单中没有该功能）</description></item><item><title>如何给 INFINI Console 账户分配 Elasticsearch 索引级别权限</title><link>/zh/docs/tutorials/role_with_index_limit/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/role_with_index_limit/</guid><description>如何给 INFINI Console 账户分配 Elasticsearch 索引级别权限 # 简介 # 本文将介绍使用 INFINI Console 限定某个账户只有 Elasticsearch 集群里面某些索引的管理权限
准备 # 下载并安装最新版 INFINI Console 开启 INFINI Console 安全功能 注册至少两个 Elasticsearch 集群到 INFINI Console 创建角色 # 点击 INFINI Console 左侧菜单 系统管理》安全设置，选择角色 Tab 页进入角色管理页。
新建平台角色 platform_role # 点击新建按钮，选择平台角色，新建一个平台角色 platform_role
新建数据角色 test_index_only # 点击新建按钮，选择数据角色，新建一个数据角色 test_index_only, 然后做如下配置：
将集群只选择 es-v7140 （限制该角色只有 Elasticsearch 集群 es-v7140 的访问权限 ） 设置索引权限 索引只输入索引 pattern test* （限制该角色只有索引名称匹配 test* 的索引访问权限） 配置完成之后点击保存按钮提交。</description></item><item><title>数据视图</title><link>/zh/docs/reference/data/view/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/data/view/</guid><description>数据视图 # 视图列表 # 创建和管理数据视图可以帮助您更好地从 Elasticsearch 获取数据。
创建视图 # 步骤 1 定义数据视图 # 输入数据视图名称 匹配规则：匹配相应索引，也可以使用 (*) 来匹配多个索引。 步骤 2 配置 # 为数据视图索引选择时间字段作为时间过滤
创建完成
编辑数据视图 # 页面列出匹配索引的所有字段，可以对字段的Format、Popularity等做相关设置。</description></item><item><title>容器部署</title><link>/zh/docs/getting-started/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/getting-started/docker/</guid><description>容器部署 # INFINI Console 支持容器方式部署。
下载镜像 # INFINI Console 的镜像发布在 Docker 的官方仓库，地址如下：
https://hub.docker.com/r/infinilabs/console
使用下面的命令即可获取最新的容器镜像：
docker pull infinilabs/console:latest 验证镜像 # 将镜像下载到本地之后，可以看到 INFINI Console 平台的容器镜像非常小，只有不到 30MB，所以下载的速度应该是非常快的。
✗ docker images REPOSITORY TAG IMAGE ID CREATED SIZE infinilabs/console latest 8c27cd334e4c 47 minutes ago 26.4MB 创建配置 # 现在需要创建一个配置文件 console.yml，来进行基本的配置，如下：
# for this System Cluster, please use Elasticsearch v7.3+ elasticsearch: - name: default enabled: true monitored: false endpoint: http://192.168.3.188:9299 basic_auth: username: elastic password: ZBdkVQUUdF1Sir4X4BGB discovery: enabled: true web: enabled: true embedding_api: true auth: enabled: true ui: enabled: true path: .</description></item><item><title>角色管理</title><link>/zh/docs/reference/system/security/role/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/system/security/role/</guid><description>角色管理 # 简介 # 角色管理包括对角色的增删改查操作。 INFINI Console 内置了一个管理员角色，角色名为 Administrator, 该角色拥有所有的操作权限, 包括所有的平台权限和数据权限。 数据角色用于控制 elasticsearch 集群的访问权限, 包括 elasticsearch API 的访问权限， elasticsearch API 的列表可以在安装目录下的 config/permission.json 文件中配置。
创建平台角色 # 输入唯一的角色名. 选择平台权限，不能为空. 按需输入角色描述 点击保存按钮保存 All 权限代表同时拥有读和写的权限, Read 代表只读权限, None 代表没有权限。
创建数据角色 # 输入唯一的角色名. 选择一个或者多个集群， * 代表选择所有集群. 配置集群级别 API 权限, * 代表所有集群级别 API 权限. 配置索引级别 API 权限, * 代表所有索引级别 API 权限. 按需输入角色描述 点击保存按钮保存 查询角色 # 输入关键字点击搜索按钮查询角色。
更新平台角色 # 按需修改角色，然后点击保存按钮保存。</description></item><item><title>数据探索</title><link>/zh/docs/reference/data/discover/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/data/discover/</guid><description>数据探索 # 简介 # 在数据探索里，可以根据时间、字段等条件对索引或者视图下的数据进行搜索查询，数据展示方式有常规模式和Insight模式。
搜索工具栏 # 索引(视图) # 搜索语句 # 时间范围 # 字段过滤 # 保存搜索 # 保存的搜索列表 # Insight模式 # Insight配置 # 常规模式 # 常规模式下用多功能图表灵活地添加字段来展示数据
可对文档数据进行编辑、删除等操作
Insight模式 # Insight模式下会根据数据特征推送可视化图表来展示数据
可通过推送列表添加图表
可对图表进行编辑、删除</description></item><item><title>安全设置</title><link>/zh/docs/reference/system/security/settings/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/system/security/settings/</guid><description>安全设置 # 禁用内置用户 # 当开启安全的之后，在没有指定用户和密码的情况下启动 console ，系统会有一个 默认的内置用户 admin。当添加新的拥有管理员权限的用户之后，可以将内置用户禁用。
不能使用内置用户禁用自己</description></item><item><title>如何监控 Elasticsearch 里面的慢查询请求</title><link>/zh/docs/tutorials/cluster_slow_request/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/cluster_slow_request/</guid><description>如何监控 Elasticsearch 里面的慢查询请求 # 简介 # 很多时候，Elasticsearch 集群会出现数据写入或者查询流量高峰期的情况，这个时候 Elasticsearch 集群压力会很大，通过对 Elasticsearch 索引查询的延迟的监控告警。 可以让我们定位 Elasticsearch 集群的压力主要集中在哪些索引。本文将介绍如何使用 INFINI Console 告警功能监控 Elasticsearch 里面的慢查询请求索引。
准备 # 下载并安装最新版 INFINI Console 使用INFINI Console 注册 Elasticsearch 集群 创建告警规则 # 在浏览器中打开 INFINI Console, 点击左侧菜单 告警管理》规则管理 进入告警管理页，然后点击 新建按钮进入创建告警规则页。按以下步骤创建告警规则：
选择集群（这里需要选择 INFINI Console 存储数据的 Elasticsearch 集群，也就是在配置文件 console.yml 配置的 Elasticsearch 集群，如果没有注册到 INFINI Console , 请先注册） 输入告警对象 .infini_metrics*（选择 Elasticsearch 集群下的索引，或者输入索引 pattern, 这里因为 INFINI Console 采集的监控数据存放在索引 .infini_metrics 里面） 输入筛选条件（ Elasticsearch 查询 DSL ） 这里我们需要过滤监控指标类别为 index_stats，并且索引名称不能为 _all, DSL 如下： { &amp;quot;bool&amp;quot;: { &amp;quot;must&amp;quot;: [ { &amp;quot;term&amp;quot;: { &amp;quot;metadata.</description></item><item><title>如何监控 Elasticsearch 集群健康状态</title><link>/zh/docs/tutorials/cluster_health_change/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/cluster_health_change/</guid><description>如何监控 Elasticsearch 集群健康状态 # 简介 # 很多时候 Elasticsearch 集群会因为某些原因，集群健康状态会变为红色，这个时候 Elasticsearch 集群至少存在一个主分片未分配或者丢失。所以监控 Elasticsearch 集群 健康状态是很有必要的。本文将介绍如何使用 INFINI Console 告警功能监控 Elasticsearch 集群 健康状态。
准备 # 下载并安装最新版 INFINI Console 使用INFINI Console 注册 Elasticsearch 集群 创建告警规则 # 在浏览器中打开 INFINI Console, 点击左侧菜单 告警管理》规则管理 进入告警管理页，然后点击 新建按钮进入创建告警规则页。按以下步骤创建告警规则：
选择集群（这里需要选择 INFINI Console 存储数据的 Elasticsearch 集群，也就是在配置文件 console.yml 配置的 Elasticsearch 集群，如果没有注册到 INFINI Console , 请先注册） 选择告警对象 .infini_metrics（选择 Elasticsearch 集群下的索引，或者输入索引 pattern, 这里因为 INFINI Console 采集的监控数据存放在索引 .infini_metrics 里面） 输入筛选条件（ Elasticsearch 查询 DSL ） 这里我们需要过滤监控指标类别为 cluster_health，并且健康状态为红色的数据，DSL 如下： { &amp;quot;bool&amp;quot;: { &amp;quot;must&amp;quot;: [ { &amp;quot;match&amp;quot;: { &amp;quot;payload.</description></item><item><title>如何监控 Elasticsearch 集群节点磁盘使用率</title><link>/zh/docs/tutorials/cluster_node_disk_usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/cluster_node_disk_usage/</guid><description>如何监控 Elasticsearch 集群节点磁盘使用率 # 简介 # 当系统磁盘使用率过高时，Elasticsearch 集群会出现数据写入不进去的情况，这样很可能导致数据丢失，所以监控 Elasticsearch 集群 节点磁盘使用率是很有必要的。本文将介绍如何使用 INFINI Console 告警功能监控 Elasticsearch 集群 节点磁盘的使用率。
准备 # 下载并安装最新版 INFINI Console 使用INFINI Console 注册 Elasticsearch 集群 创建告警规则 # 在浏览器中打开 INFINI Console, 点击左侧菜单 告警管理》规则管理 进入告警管理页，然后点击 新建按钮进入创建告警规则页。按以下步骤创建告警规则：
选择集群（这里需要选择 INFINI Console 存储数据的 Elasticsearch 集群，也就是在配置文件 console.yml 配置的 Elasticsearch 集群，如果没有注册到 INFINI Console , 请先注册） 输入告警对象 .infini_metrics*（选择 Elasticsearch 集群下的索引，或者输入索引 pattern, 这里因为 INFINI Console 采集的监控数据存放在索引 .infini_metrics 里面） 输入筛选条件（ Elasticsearch 查询 DSL ） 这里我们需要过滤监控指标类别为 node_stats，DSL 如下： { &amp;quot;bool&amp;quot;: { &amp;quot;must&amp;quot;: [ { &amp;quot;term&amp;quot;: { &amp;quot;metadata.</description></item><item><title>如何监控 Elasticsearch 集群节点的 CPU 使用率</title><link>/zh/docs/tutorials/cluster_node_cpu_usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/cluster_node_cpu_usage/</guid><description>如何监控 Elasticsearch 集群节点的 CPU 使用率 # 简介 # 本文将介绍如何使用 INFINI Console 监控 Elasticsearch 集群节点磁盘的使用率，并进行告警。
准备 # 下载并安装最新版 INFINI Console 使用INFINI Console 注册 Elasticsearch 集群 创建告警规则 # 在浏览器中打开 INFINI Console, 点击左侧菜单 告警管理》规则管理 进入告警管理页，然后点击 新建按钮进入创建告警规则页。按以下步骤创建告警规则：
选择集群（这里需要选择 INFINI Console 存储数据的 Elasticsearch 集群，也就是在配置文件 console.yml 配置的 Elasticsearch 集群，如果没有注册到 INFINI Console , 请先注册） 输入告警对象 .infini_metrics*（选择 Elasticsearch 集群下的索引，或者输入索引 pattern, 这里因为 INFINI Console 采集的监控数据存放在索引 .infini_metrics 里面） 输入筛选条件（ Elasticsearch 查询 DSL ） 这里我们需要过滤监控指标类别为 node_stats 及元数据分类为 elasticsearch，DSL 如下： { &amp;quot;bool&amp;quot;: { &amp;quot;must&amp;quot;: [ { &amp;quot;term&amp;quot;: { &amp;quot;metadata.</description></item><item><title>如何监控 Elasticsearch 集群节点的 JVM 使用率</title><link>/zh/docs/tutorials/cluster_node_jvm_usage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/cluster_node_jvm_usage/</guid><description>如何监控 Elasticsearch 集群节点的 JVM 使用率 # 简介 # 本文将介绍如何使用 INFINI Console 监控 Elasticsearch 集群节点 JVM 的使用率，并进行告警。
准备 # 下载并安装最新版 INFINI Console 使用INFINI Console 注册 Elasticsearch 集群 创建告警规则 # 在浏览器中打开 INFINI Console, 点击左侧菜单 告警管理》规则管理 进入告警管理页，然后点击 新建按钮进入创建告警规则页。按以下步骤创建告警规则：
选择集群（这里需要选择 INFINI Console 存储数据的 Elasticsearch 集群，也就是在配置文件 console.yml 配置的 Elasticsearch 集群，如果没有注册到 INFINI Console , 请先注册） 输入告警对象 .infini_metrics*（选择 Elasticsearch 集群下的索引，或者输入索引 pattern, 这里因为 INFINI Console 采集的监控数据存放在索引 .infini_metrics 里面） 输入筛选条件（ Elasticsearch 查询 DSL ） 这里我们需要过滤监控指标类别为 node_stats 及元数据分类为 elasticsearch，DSL 如下： { &amp;quot;bool&amp;quot;: { &amp;quot;must&amp;quot;: [ { &amp;quot;term&amp;quot;: { &amp;quot;metadata.</description></item><item><title>如何使用 INFINI 迁移功能</title><link>/zh/docs/tutorials/data_migration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/tutorials/data_migration/</guid><description>如何使用 INFINI 迁移功能 # 简介 # 本文将介绍如何使用 INFINI Console 和 INFINI Gateway 来迁移 Elasticsearch 索引数据。
准备 # 下载并安装最新版 INFINI Console (版本要求 0.7 及以上) 下载并安装最新版的 INFINI Gateway (版本要求 1.9 及以上) 两个 Elasticsearch 集群 Gateway 迁移配置 # 配置文件名为 migration.yml
path.data: data path.logs: log progress_bar.enabled: false stats.no_buffer: true elasticsearch: - name: task_from enabled: true schema: http hosts: - 192.168.3.6:9200 traffic_control: #global traffic control max_bps_per_node: 209715200 #max total bytes send to es per node, 200MB/s max_qps_per_node: 20000 #max total requests send to es per node, 20k/s discovery: # auto discovery elasticsearch cluster nodes enabled: true refresh: enabled: true interval: 60s pipeline: - name: target_indexing auto_start: true keep_running: true processor: - disorder_bulk_indexing: max_worker_size: 10 detect_interval: 100 bulk: compress: true batch_size_in_mb: 20 batch_size_in_docs: 5000 invalid_queue: bulk_indexing_400 queues: type: scroll_docs consumer: fetch_max_messages: 1000 - name: task_stats auto_start: true keep_running: true processor: - dynamic_task_stats: detect_interval: 10000 pipeline.</description></item><item><title>模板变量</title><link>/zh/docs/reference/alerting/variables/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>/zh/docs/reference/alerting/variables/</guid><description>模板变量 # 简介 # 自定义告警触发事件内容时，除了自己撰写的固定文案外，事件标题、事件内容等也支持模板语法。可以使用事件中的字段实现文案的渲染。
模板变量 # 用于渲染字段的语法为{{ .字段名 }}，可用于模板内容渲染的变量字段如下：
变量字段名 字段类型 说明 示例 rule_id string rule uuid c9f663tath2e5a0vksjg rule_name string rule name High CPU usage resource_id string resource uuid c9f663tath2e5a0vksjg resource_name string resource name es-v716 event_id string identifier for check details c9f663tath2e5a0vksjx timestamp number Millisecond timestamp 1654595042399 first_group_value string The first value of group_values in results c9aikmhpdamkiurn1vq0 first_threshold string The first value of threshold in results 90 priority string The highest priority in results critical title string event title Node ({{.</description></item></channel></rss>