<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.79.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Cluster Monitoring #  Introduction #  When the monitoring of the registered cluster is enabled, the INFINI Console will periodically collect data from the target cluster according to the corresponding configuration. Including some metrics at the cluster, node, and index level. These metrics can then be observed in cluster monitoring to understand the running status of the target cluster.
List of Elasticsearch API permissions required for monitoring #  _cluster/health，_cluster/stats，_cat/shards, /_nodes/<node_id>/stats _cat/indices, _stats, _cluster/state, _nodes, _alias, _cluster/settings"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Cluster Monitoring"><meta property="og:description" content="Cluster Monitoring #  Introduction #  When the monitoring of the registered cluster is enabled, the INFINI Console will periodically collect data from the target cluster according to the corresponding configuration. Including some metrics at the cluster, node, and index level. These metrics can then be observed in cluster monitoring to understand the running status of the target cluster.
List of Elasticsearch API permissions required for monitoring #  _cluster/health，_cluster/stats，_cat/shards, /_nodes/<node_id>/stats _cat/indices, _stats, _cluster/state, _nodes, _alias, _cluster/settings"><meta property="og:type" content="article"><meta property="og:url" content="/docs/reference/platform/monitoring/"><title>Cluster Monitoring | INFINI Console</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=/zh/docs/reference/platform/monitoring/ title=集群监控><link rel=stylesheet href=/book.min.84eaa6a79900600efa5cbc14401006e14d31cf306ef3db88d7fd45c2f6adc342.css integrity="sha256-hOqmp5kAYA76XLwUQBAG4U0xzzBu89uI1/1Fwvatw0I="><script defer src=/en.search.min.977e13edbdca9d0c793e6be98155147758eb1ab2113ed161caeae2a99e3df4ae.js integrity="sha256-l34T7b3KnQx5PmvpgVUUd1jrGrIRPtFhyuriqZ499K4="></script><link rel=stylesheet type=text/css href=/css/asciinema-player.css><script defer src=/js/jquery-2.x.min.js></script><script defer src=/js/doc.js></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><img src=/img/logo-en.svg alt=Logo></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><div class=heading><select class=version-selector>
<option value>master (latest)</option>
<option value=v0.6.0>v0.6.x</option>
<option value=v0.5.0>v0.5.x</option>
<option value=v0.4.0>v0.4.x</option>
<option value=v0.3.0>v0.3.x</option></select></div><ul><li><input type=checkbox id=section-f1b7c1b2e5dd43526e77637c475d35b8 class=toggle>
<label for=section-f1b7c1b2e5dd43526e77637c475d35b8 class="flex justify-between"><a>Quick Start</a>
<span>▾</span></label><ul><li><a href=/docs/getting-started/install/>Installation</a></li><li><a href=/docs/getting-started/ilm/>Index Settings</a></li><li><a href=/docs/getting-started/docker/>Docker</a></li></ul></li><li><input type=checkbox id=section-084ba1dbb512652712ad881ff8045610 class=toggle checked>
<label for=section-084ba1dbb512652712ad881ff8045610 class="flex justify-between"><a>Reference</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-5e5111152017c79ed39a34209990dab7 class=toggle>
<label for=section-5e5111152017c79ed39a34209990dab7 class="flex justify-between"><a>Alerting</a>
<span>▾</span></label><ul><li><a href=/docs/reference/alerting/message/>Alerting Center</a></li><li><a href=/docs/reference/alerting/rule/>Alerting Rules</a></li><li><a href=/docs/reference/alerting/channel/>Alerting Channels</a></li><li><a href=/docs/reference/alerting/variables/>Template variables</a></li></ul></li><li><a href=/docs/reference/initialization/>Initialization Guide</a><ul></ul></li><li><input type=checkbox id=section-dc19493497a0afff7833e4e9dc3568aa class=toggle checked>
<label for=section-dc19493497a0afff7833e4e9dc3568aa class="flex justify-between"><a>Platform</a>
<span>▾</span></label><ul><li><a href=/docs/reference/platform/overview/>Platform Overview</a></li><li><a href=/docs/reference/platform/monitoring/ class=active>Cluster Monitoring</a></li></ul></li><li><input type=checkbox id=section-77e7dc04d6c2293e5fe55f48c5b1a96d class=toggle>
<label for=section-77e7dc04d6c2293e5fe55f48c5b1a96d class="flex justify-between"><a href=/docs/reference/data/>Data</a>
<span>▾</span></label><ul><li><a href=/docs/reference/data/indices/>Index Management</a></li><li><a href=/docs/reference/data/alias/>Alias Management</a></li><li><a href=/docs/reference/data/view/>Data View</a></li><li><a href=/docs/reference/data/discover/>Discover</a></li></ul></li><li><a href=/docs/reference/devtool/>Dev Tools</a><ul></ul></li><li><input type=checkbox id=section-4d372e275e589511fb7282b1f9f3f20f class=toggle>
<label for=section-4d372e275e589511fb7282b1f9f3f20f class="flex justify-between"><a>System</a>
<span>▾</span></label><ul><li><a href=/docs/reference/system/cluster/>Cluster Management</a><ul></ul></li><li><a href=/docs/reference/system/command/>Common Commands</a><ul></ul></li><li><input type=checkbox id=section-89e2a3b5192ba2e5bd11dc7aab78be3d class=toggle>
<label for=section-89e2a3b5192ba2e5bd11dc7aab78be3d class="flex justify-between"><a href=/docs/reference/system/security/>Security</a>
<span>▾</span></label><ul><li><a href=/docs/reference/system/security/role/>Role</a></li><li><a href=/docs/reference/system/security/user/>User</a></li><li><a href=/docs/reference/system/security/settings/>Settings</a></li></ul></li></ul></li><li><input type=checkbox id=section-5860fb455fea11f0ed079673fd767cda class=toggle>
<label for=section-5860fb455fea11f0ed079673fd767cda class="flex justify-between"><a>Agent</a>
<span>▾</span></label><ul><li><a href=/docs/reference/agent/manage/manage/>Overview</a></li><li><a href=/docs/reference/agent/install/>Installing Agent</a></li><li><a href=/docs/reference/agent/docker/>Container Deployment</a></li></ul></li></ul></li><li><a href=/docs/screenshots/>Screenshots</a><ul></ul></li><li><input type=checkbox id=section-7dd85575c84e6825eb9419e748eb5977 class=toggle>
<label for=section-7dd85575c84e6825eb9419e748eb5977 class="flex justify-between"><a>Tutorials</a>
<span>▾</span></label><ul><li><a href=/docs/tutorials/start_with_specify_user/>How to specify built-in account name and password to start INFINI Console</a></li><li><a href=/docs/tutorials/create_readonly_account/>How to easily create an Elasticsearch "guest" user</a></li><li><a href=/docs/tutorials/role_with_different_rights/>How to assign different Elasticsearch cluster access permissions to different INFINI Console accounts</a></li><li><a href=/docs/tutorials/role_with_index_limit/>How to assign Elasticsearch index-level permissions to INFINI Console accounts</a></li><li><a href=/docs/tutorials/cluster_health_change/>How to Monitor Elasticsearch Cluster Health</a></li><li><a href=/docs/tutorials/cluster_node_disk_usage/>How to monitor Elasticsearch cluster node disk usage</a></li><li><a href=/docs/tutorials/cluster_slow_request/>How to monitor slow query requests in Elasticsearch</a></li><li><a href=/docs/tutorials/cluster_node_cpu_usage/>How to monitor the CPU usage of Elasticsearch cluster nodes</a></li><li><a href=/docs/tutorials/cluster_node_jvm_usage/>How to monitor JVM usage of Elasticsearch cluster nodes</a></li></ul></li><li><a href=/docs/user-cases/>User Cases</a><ul></ul></li><li><a href=/docs/troubleshooting/>FAQs</a><ul></ul></li><li><a href=/docs/release-notes/>Release Notes</a><ul></ul></li><li><a href=/docs/upgrade/>Upgrade</a><ul></ul></li><li><a href=/docs/resources/>Other Resources</a><ul></ul></li></ul><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li><a href=/zh/docs/reference/platform/monitoring/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li><li class=active><a href=/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></li></ul></div><ul><a class=download-btn href=https://release.infinilabs.com/>Download</a></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Cluster Monitoring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#cluster-monitoring>Cluster Monitoring</a><ul><li><a href=#introduction>Introduction</a></li><li><a href=#list-of-elasticsearch-api-permissions-required-for-monitoring>List of Elasticsearch API permissions required for monitoring</a></li><li><a href=#enable-cluster-monitoring>Enable cluster monitoring</a></li><li><a href=#view-cluster-metrics-monitoring>View cluster metrics monitoring</a></li><li><a href=#view-node-metrics-monitoring>View node metrics monitoring</a></li><li><a href=#view-index-metrics-monitoring>View index metrics monitoring</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=cluster-monitoring>Cluster Monitoring
<a class=anchor href=#cluster-monitoring>#</a></h1><h2 id=introduction>Introduction
<a class=anchor href=#introduction>#</a></h2><p>When the monitoring of the registered cluster is enabled, the <code>INFINI Console</code> will periodically collect data from the target cluster according to the corresponding configuration.
Including some metrics at the cluster, node, and index level. These metrics can then be observed in cluster monitoring to understand the running status of the target cluster.</p><h2 id=list-of-elasticsearch-api-permissions-required-for-monitoring>List of Elasticsearch API permissions required for monitoring
<a class=anchor href=#list-of-elasticsearch-api-permissions-required-for-monitoring>#</a></h2><p>_cluster/health，_cluster/stats，_cat/shards, /_nodes/&lt;node_id>/stats
_cat/indices, _stats, _cluster/state, _nodes, _alias, _cluster/settings</p><h2 id=enable-cluster-monitoring>Enable cluster monitoring
<a class=anchor href=#enable-cluster-monitoring>#</a></h2><p>When registering the cluster or modifying the cluster configuration, you can see the following interface</p><p><img src=/img/screenshot/20220715-monitor-config.jpg alt="monitor config"></p><p>You can see that there is a <code>Monitored</code> switch. When this switch is turned on, it means that the current cluster is monitored.
When a cluster is registered, monitoring is enabled by default. The monitoring configuration includes cluster health metrics, cluster metrics, node metrics and index metrics.
And you can set whether to open and the collection time interval respectively.</p><blockquote><p>The above are the settings for a single cluster. In the configuration file <code>console.yaml</code>, you can set the monitoring start and stop of all clusters. By default, you can see the following configuration in the configuration file:</p><pre><code class=language-aidl data-lang=aidl>metrics:
enabled: true
major_ip_pattern: &quot;192.*&quot;
queue: metrics
elasticsearch:
enabled: true
cluster_stats: true
node_stats: true
index_stats: true
</code></pre><p>If <code>metrics>enable</code> is set to false, then all cluster monitoring is disabled;
If <code>metrics>elasticsearch>cluster_stats>enabled</code> is set to <code>false</code>, then all
The cluster will not collect related metrics at the cluster level.</p></blockquote><h2 id=view-cluster-metrics-monitoring>View cluster metrics monitoring
<a class=anchor href=#view-cluster-metrics-monitoring>#</a></h2><p>After monitoring is enabled, you can view the monitoring information of the cluster in the monitoring report under the platform management on the left menu of <code>INFINI Console</code>, as follows:</p><p><img src=/img/screenshot/20220715-monitor-cluster-overview.jpg alt="monitor cluster overview"></p><p>Click the Advanced tab to view more metrics at the cluster level;</p><p><img src=/img/screenshot/20220715-monitor-cluster-advance.jpg alt="monitor cluster advance"></p><p>As shown in the figure, you can specify multiple nodes in a cluster to view node-related metrics and compare them horizontally.
By default, the top 5 node metrics are displayed (top 5 nodes are calculated based on the sum of the query qps and write qps of the node in the last 15 minutes).
Switching to the index tab page here can also specify several related metrics to view the index, similar to the node.
Switch to the Thread Pool tab to view the related metrics of the node&rsquo;s thread pool.</p><h2 id=view-node-metrics-monitoring>View node metrics monitoring
<a class=anchor href=#view-node-metrics-monitoring>#</a></h2><p>Click the Nodes tab to view a list of cluster nodes.</p><p><img src=/img/screenshot/20220715-monitor-node-list.jpg alt="monitor node list"></p><p>Click the node name in the list to view the monitoring of the specified node</p><p><img src=/img/screenshot/20220715-monitor-node-shards.jpg alt="monitor node list"></p><p>Here you can view the metrics monitoring information and related fragmentation information of a single node</p><h2 id=view-index-metrics-monitoring>View index metrics monitoring
<a class=anchor href=#view-index-metrics-monitoring>#</a></h2><p>Click the Indexes tab to see a list of cluster indexes.</p><p><img src=/img/screenshot/20220715-monitor-indices.jpg alt="monitor node list"></p><p>Click the node name in the list to view the monitoring of the specified index</p><p><img src=/img/screenshot/20220715-monitor-index-shards.jpg alt="monitor node list"></p><p>Here you can view the metrics monitoring information and related fragmentation information of a single node</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li><a href=/zh/docs/reference/platform/monitoring/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
简体中文</a></li><li class=active><a href=/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></li></ul></div><div class="flex align-center footer">©INFINI.LTD, All Rights Reserved.</div><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2716856,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-L0XH1C4CVP"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-L0XH1C4CVP');</script><script type=text/javascript>var _smartsupp=_smartsupp||{};_smartsupp.key='691ff544d18a237005a011a7290b839d8fe811a4';window.smartsupp||(function(d){var s,c,o=smartsupp=function(){o._.push(arguments)};o._=[];s=d.getElementsByTagName('script')[0];c=d.createElement('script');c.type='text/javascript';c.charset='utf-8';c.async=true;c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);})(document);</script></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#cluster-monitoring>Cluster Monitoring</a><ul><li><a href=#introduction>Introduction</a></li><li><a href=#list-of-elasticsearch-api-permissions-required-for-monitoring>List of Elasticsearch API permissions required for monitoring</a></li><li><a href=#enable-cluster-monitoring>Enable cluster monitoring</a></li><li><a href=#view-cluster-metrics-monitoring>View cluster metrics monitoring</a></li><li><a href=#view-node-metrics-monitoring>View node metrics monitoring</a></li><li><a href=#view-index-metrics-monitoring>View index metrics monitoring</a></li></ul></li></ul></nav></aside></main><script src=/js/asciinema-player.js></script></body></html>